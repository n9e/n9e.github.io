<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://n9e.github.io/main.986a7890eb8b99f737d8db581f6db9a9c52190869d40b93f22e9035c9daf504242f65cb29a4f560cb4f84454da6f901ab4c142dd7c11bb6d16ab41684963e8cd.css integrity="sha512-mGp4kOuLmfc32NtYH225qcUhkIadQLk/IukDXJ2vUEJC9lyymk9WDLT4RFTab5AatMFC3XwRu20Wq0FoSWPozQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>API - Nightingale</title><meta name=description content="æœ¬æ–‡ä»‹ç»ä½¿ç”¨ API è°ƒç”¨å¤œèºç›‘æ§ Nightingale çš„æ¥å£ï¼Œä¸»è¦æ˜¯ä¸¤ç±»æ¥å£ï¼Œä¸€ç±»æ˜¯é¡µé¢æ“ä½œç±»ï¼Œå¦ä¸€ç±»æ˜¯æ•°æ®æ¨é€ç±»"><link rel=canonical href=https://n9e.github.io/zh/docs/usecase/api/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="API"><meta property="og:description" content="æœ¬æ–‡ä»‹ç»ä½¿ç”¨ API è°ƒç”¨å¤œèºç›‘æ§ Nightingale çš„æ¥å£ï¼Œä¸»è¦æ˜¯ä¸¤ç±»æ¥å£ï¼Œä¸€ç±»æ˜¯é¡µé¢æ“ä½œç±»ï¼Œå¦ä¸€ç±»æ˜¯æ•°æ®æ¨é€ç±»"><meta property="og:url" content="https://n9e.github.io/zh/docs/usecase/api/"><meta property="og:site_name" content="Home"><meta property="article:published_time" content="2025-06-13T17:52:38+08:00"><meta property="article:modified_time" content="2025-07-07T12:13:34+08:00"><meta property="og:image" content="https://n9e.github.io/doks.png"><meta property="og:image:alt" content="Home"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@ulricqin"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="API"><meta name=twitter:description content="æœ¬æ–‡ä»‹ç»ä½¿ç”¨ API è°ƒç”¨å¤œèºç›‘æ§ Nightingale çš„æ¥å£ï¼Œä¸»è¦æ˜¯ä¸¤ç±»æ¥å£ï¼Œä¸€ç±»æ˜¯é¡µé¢æ“ä½œç±»ï¼Œå¦ä¸€ç±»æ˜¯æ•°æ®æ¨é€ç±»"><meta name=twitter:image content="https://n9e.github.io/doks.png"><meta name=twitter:image:alt content="API"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://n9e.github.io/#/schema/organization/1","name":"Doks","url":"https://n9e.github.io/","sameAs":["https://twitter.com/ulricqin","https://github.com/ccfos/nightingale"],"logo":{"@type":"ImageObject","@id":"https://n9e.github.io/#/schema/image/1","url":"https://n9e.github.io/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://n9e.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://n9e.github.io/#/schema/website/1","url":"https://n9e.github.io/","name":"Home","description":"Nightingale is an open-source monitoring system that focuses on alerting.","publisher":{"@id":"https://n9e.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://n9e.github.io/zh/docs/usecase/api/","url":"https://n9e.github.io/zh/docs/usecase/api/","name":"API","description":"æœ¬æ–‡ä»‹ç»ä½¿ç”¨ API è°ƒç”¨å¤œèºç›‘æ§ Nightingale çš„æ¥å£ï¼Œä¸»è¦æ˜¯ä¸¤ç±»æ¥å£ï¼Œä¸€ç±»æ˜¯é¡µé¢æ“ä½œç±»ï¼Œå¦ä¸€ç±»æ˜¯æ•°æ®æ¨é€ç±»","isPartOf":{"@id":"https://n9e.github.io/#/schema/website/1"},"about":{"@id":"https://n9e.github.io/#/schema/organization/1"},"datePublished":"2025-06-13T17:52:38CET","dateModified":"2025-07-07T12:13:34CET","breadcrumb":{"@id":"https://n9e.github.io/zh/docs/usecase/api/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://n9e.github.io/zh/docs/usecase/api/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://n9e.github.io/zh/docs/usecase/api/"]}]},{"@type":"BreadcrumbList","@id":"https://n9e.github.io/zh/docs/usecase/api/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://n9e.github.io/","url":"https://n9e.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://n9e.github.io/zh/","url":"https://n9e.github.io/zh/","name":"Zh"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://n9e.github.io/zh/docs/","url":"https://n9e.github.io/zh/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://n9e.github.io/zh/docs/usecase/","url":"https://n9e.github.io/zh/docs/usecase/","name":"Usecase"}},{"@type":"ListItem","position":5,"item":{"@id":"https://n9e.github.io/zh/docs/usecase/api/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://n9e.github.io/#/schema/article/1","headline":"API","description":"æœ¬æ–‡ä»‹ç»ä½¿ç”¨ API è°ƒç”¨å¤œèºç›‘æ§ Nightingale çš„æ¥å£ï¼Œä¸»è¦æ˜¯ä¸¤ç±»æ¥å£ï¼Œä¸€ç±»æ˜¯é¡µé¢æ“ä½œç±»ï¼Œå¦ä¸€ç±»æ˜¯æ•°æ®æ¨é€ç±»","isPartOf":{"@id":"https://n9e.github.io/zh/docs/usecase/api/"},"mainEntityOfPage":{"@id":"https://n9e.github.io/zh/docs/usecase/api/"},"datePublished":"2025-06-13T17:52:38CET","dateModified":"2025-07-07T12:13:34CET","author":{"@id":"https://n9e.github.io/#/schema/person/2"},"publisher":{"@id":"https://n9e.github.io/#/schema/organization/1"},"image":{"@id":"https://n9e.github.io/zh/docs/usecase/api/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://n9e.github.io/#/schema/person/2","name":"Henk Verlinde","sameAs":["https://twitter.com/henkverlinde","https://www.linkedin.com/in/henkverlinde/","https://github.com/UlricQin"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://n9e.github.io/zh/docs/usecase/api/#/schema/image/2","url":"https://n9e.github.io/doks.png","contentUrl":"https://n9e.github.io/doks.png","caption":"API"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://n9e.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://n9e.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://n9e.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://n9e.github.io/site.webmanifest></head><body class="docs single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/zh/ aria-label=Home>Home</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/zh/>Home</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=/zh/docs/prologue/introduction/>æ–‡æ¡£</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/ccfos/nightingale><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="dropdown order-md-2"><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
ZH
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-end shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=/zh/docs/usecase/api/>Chinese</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=/zh/en hreflang=en lang=en>English</a></li></ul></div></nav></header><nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation"><div class="container-xxl d-flex align-items-md-center"><form class="doks-search position-relative flex-grow-1 me-auto"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-df36888424843793b8bfe4fd460c9b87 aria-expanded=false>
å‰è¨€</button><div class=collapse id=section-df36888424843793b8bfe4fd460c9b87><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/introduction/>å¤œèºé¡¹ç›®ä»‹ç»</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/prometheus/>å¤œèºå¯¹æ¯” Prometheus</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/pre-knowledge/>å­¦ä¹ å¤œèºçš„å‰ç½®çŸ¥è¯†</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/architecture/>å¤œèºæ¶æ„è®¾è®¡</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/flashcat/>å¤œèºå•†ä¸šç‰ˆ</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/videos/>å…¥é—¨è§†é¢‘æ•™ç¨‹</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-e655a410ff21cd07e7a0150491e04371 aria-expanded=false>
å®‰è£…</button><div class=collapse id=section-e655a410ff21cd07e7a0150491e04371><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/pre-intro/>å®‰è£…å‰ç½®è¯´æ˜</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/upgrade/>å‡çº§</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/binary/>äºŒè¿›åˆ¶éƒ¨ç½²</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/compose/>Docker Compose</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/helm/>Helm</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/configuration/>é…ç½®è®²è§£</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-15ad62fa6c036f6a916b4336fe04c118 aria-expanded=false>
é‡‡é›†å™¨</button><div class=collapse id=section-15ad62fa6c036f6a916b4336fe04c118><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/intro/>å‰ç½®è¯´æ˜</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/categraf/>Categraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/telegraf/>Telegraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/datadog-agent/>Datadog-Agent</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-282a264a821e1d594e596f99f61e057d aria-expanded=false>
å¿«é€Ÿä½“éªŒ</button><div class=collapse id=section-282a264a821e1d594e596f99f61e057d><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/datasource/>æ•°æ®æº</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/ad-hoc/>å³æ—¶æŸ¥è¯¢</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/metric-alerting/>æŒ‡æ ‡å‘Šè­¦</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/logs-alerting/>æ—¥å¿—å‘Šè­¦</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/notify-rules/>é€šçŸ¥è§„åˆ™</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/dashboard/>ä»ªè¡¨ç›˜</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1bf2c059b13a7f00ff98afe5f2d7d7c5 aria-expanded=false>
ç›‘æ§å®è·µ</button><div class=collapse id=section-1bf2c059b13a7f00ff98afe5f2d7d7c5><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/linux/>Linux OS</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/proc/>è¿›ç¨‹ç›‘æ§</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/port/>ç«¯å£ç›‘æ§</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/exec/>æ’ä»¶è„šæœ¬</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/mysql/>MySQL</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/redis/>Redis</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-86d207ca70c494ce35a5f9d5aa684fb7 aria-expanded=true>
åŠŸèƒ½è¯¦è§£</button><div class="collapse show" id=section-86d207ca70c494ce35a5f9d5aa684fb7><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/alerting/>å‘Šè­¦åŸç†å’Œæµç¨‹è¯´æ˜</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/bizgroup/>ä¸šåŠ¡ç»„</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/mute/>å±è”½è§„åˆ™</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/subscribe/>è®¢é˜…è§„åˆ™</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/processor/>äº‹ä»¶å¤„ç†å™¨ Pipeline</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/media/>è‡ªå®šä¹‰é€šçŸ¥åª’ä»‹</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/sso/>å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰</a></li><li><a class="docs-link rounded active" href=https://n9e.github.io/zh/docs/usecase/api/>API</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1fe917b01f9a3f87fa2d7d3b7643fac1 aria-expanded=false>
FAQ</button><div class=collapse id=section-1fe917b01f9a3f87fa2d7d3b7643fac1><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/faq/global-callback/>å…¨å±€å›è°ƒä¸‹çº¿ï¼Œé‚£å…¨å±€åœºæ™¯æ€ä¹ˆå¤„ç†ï¼Ÿ</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-df36888424843793b8bfe4fd460c9b87 aria-expanded=false>
å‰è¨€</button><div class=collapse id=section-df36888424843793b8bfe4fd460c9b87><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/introduction/>å¤œèºé¡¹ç›®ä»‹ç»</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/prometheus/>å¤œèºå¯¹æ¯” Prometheus</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/pre-knowledge/>å­¦ä¹ å¤œèºçš„å‰ç½®çŸ¥è¯†</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/architecture/>å¤œèºæ¶æ„è®¾è®¡</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/flashcat/>å¤œèºå•†ä¸šç‰ˆ</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/videos/>å…¥é—¨è§†é¢‘æ•™ç¨‹</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-e655a410ff21cd07e7a0150491e04371 aria-expanded=false>
å®‰è£…</button><div class=collapse id=section-e655a410ff21cd07e7a0150491e04371><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/pre-intro/>å®‰è£…å‰ç½®è¯´æ˜</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/upgrade/>å‡çº§</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/binary/>äºŒè¿›åˆ¶éƒ¨ç½²</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/compose/>Docker Compose</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/helm/>Helm</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/configuration/>é…ç½®è®²è§£</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-15ad62fa6c036f6a916b4336fe04c118 aria-expanded=false>
é‡‡é›†å™¨</button><div class=collapse id=section-15ad62fa6c036f6a916b4336fe04c118><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/intro/>å‰ç½®è¯´æ˜</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/categraf/>Categraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/telegraf/>Telegraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/datadog-agent/>Datadog-Agent</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-282a264a821e1d594e596f99f61e057d aria-expanded=false>
å¿«é€Ÿä½“éªŒ</button><div class=collapse id=section-282a264a821e1d594e596f99f61e057d><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/datasource/>æ•°æ®æº</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/ad-hoc/>å³æ—¶æŸ¥è¯¢</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/metric-alerting/>æŒ‡æ ‡å‘Šè­¦</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/logs-alerting/>æ—¥å¿—å‘Šè­¦</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/notify-rules/>é€šçŸ¥è§„åˆ™</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/dashboard/>ä»ªè¡¨ç›˜</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1bf2c059b13a7f00ff98afe5f2d7d7c5 aria-expanded=false>
ç›‘æ§å®è·µ</button><div class=collapse id=section-1bf2c059b13a7f00ff98afe5f2d7d7c5><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/linux/>Linux OS</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/proc/>è¿›ç¨‹ç›‘æ§</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/port/>ç«¯å£ç›‘æ§</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/exec/>æ’ä»¶è„šæœ¬</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/mysql/>MySQL</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/practice/redis/>Redis</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-86d207ca70c494ce35a5f9d5aa684fb7 aria-expanded=true>
åŠŸèƒ½è¯¦è§£</button><div class="collapse show" id=section-86d207ca70c494ce35a5f9d5aa684fb7><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/alerting/>å‘Šè­¦åŸç†å’Œæµç¨‹è¯´æ˜</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/bizgroup/>ä¸šåŠ¡ç»„</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/mute/>å±è”½è§„åˆ™</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/subscribe/>è®¢é˜…è§„åˆ™</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/processor/>äº‹ä»¶å¤„ç†å™¨ Pipeline</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/media/>è‡ªå®šä¹‰é€šçŸ¥åª’ä»‹</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usecase/sso/>å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰</a></li><li><a class="docs-link rounded active" href=https://n9e.github.io/zh/docs/usecase/api/>API</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1fe917b01f9a3f87fa2d7d3b7643fac1 aria-expanded=false>
FAQ</button><div class=collapse id=section-1fe917b01f9a3f87fa2d7d3b7643fac1><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/faq/global-callback/>å…¨å±€å›è°ƒä¸‹çº¿ï¼Œé‚£å…¨å±€åœºæ™¯æ€ä¹ˆå¤„ç†ï¼Ÿ</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#é¡µé¢æ“ä½œç±»>é¡µé¢æ“ä½œç±»</a><ul><li><a href=#æå®šè®¤è¯>æå®šè®¤è¯</a></li><li><a href=#äº†è§£æœ‰å“ªäº›æ¥å£>äº†è§£æœ‰å“ªäº›æ¥å£</a></li></ul></li><li><a href=#æ•°æ®æ¨é€ç±»>æ•°æ®æ¨é€ç±»</a><ul><li><a href=#æ¨é€æ ·ä¾‹>æ¨é€æ ·ä¾‹</a></li><li><a href=#å¦‚ä½•è®¤è¯>å¦‚ä½•è®¤è¯</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>API</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#é¡µé¢æ“ä½œç±»>é¡µé¢æ“ä½œç±»</a><ul><li><a href=#æå®šè®¤è¯>æå®šè®¤è¯</a></li><li><a href=#äº†è§£æœ‰å“ªäº›æ¥å£>äº†è§£æœ‰å“ªäº›æ¥å£</a></li></ul></li><li><a href=#æ•°æ®æ¨é€ç±»>æ•°æ®æ¨é€ç±»</a><ul><li><a href=#æ¨é€æ ·ä¾‹>æ¨é€æ ·ä¾‹</a></li><li><a href=#å¦‚ä½•è®¤è¯>å¦‚ä½•è®¤è¯</a></li></ul></li></ul></nav></div></nav><p>æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ API è°ƒç”¨å¤œèºç›‘æ§ï¼ˆNightingaleï¼‰çš„æ¥å£ï¼Œä¸»è¦æ˜¯ä¸¤ç±»æ¥å£ï¼Œä¸€ç±»æ˜¯é¡µé¢æ“ä½œç±»ï¼Œå°±æ˜¯ä½¿ç”¨ API æ¨¡ä»¿ç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„æ“ä½œï¼Œå¦ä¸€ç±»æ˜¯æ•°æ®æ¨é€ç±»ï¼Œæ¯”å¦‚è‡ªå·±çš„ç¨‹åºé‡‡é›†äº†ç›‘æ§æ•°æ®ï¼Œæƒ³è¦æ¨é€ç»™å¤œèºã€‚</p><h2 id=é¡µé¢æ“ä½œç±»>é¡µé¢æ“ä½œç±» <a href=#%e9%a1%b5%e9%9d%a2%e6%93%8d%e4%bd%9c%e7%b1%bb class=anchor aria-hidden=true>#</a></h2><p>é¡µé¢æ“ä½œç±»çš„ API ä¸»è¦æ˜¯æ¨¡æ‹Ÿç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„æ“ä½œï¼Œæ¯”å¦‚åˆ›å»ºå‘Šè­¦è§„åˆ™ã€ä¿®æ”¹æœºå™¨æ ‡ç­¾ã€ä¿®æ”¹æœºå™¨å¤‡æ³¨ã€è°ƒæ•´æœºå™¨å½’å±çš„ä¸šåŠ¡ç»„ç­‰ã€‚æ‰€æœ‰ç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„æ“ä½œï¼Œéƒ½å¯ä»¥ä½¿ç”¨ API å®Œæˆï¼Œæ‚¨å¯ä»¥é€šè¿‡è¿™äº›æ¥å£æ¥å®ç°è‡ªåŠ¨åŒ–æ“ä½œã€‚</p><p>æ˜¾ç„¶ï¼Œè¦è°ƒç”¨ API éœ€è¦æœ‰ä¸¤ä¸ªå‰æï¼š</p><ul><li>æå®šè®¤è¯</li><li>äº†è§£æœ‰å“ªäº›æ¥å£ï¼Œå„ä¸ªæ¥å£æœ‰å“ªäº›å‚æ•°</li></ul><h3 id=æå®šè®¤è¯>æå®šè®¤è¯ <a href=#%e6%90%9e%e5%ae%9a%e8%ae%a4%e8%af%81 class=anchor aria-hidden=true>#</a></h3><p>è¿™é‡Œç›´æ¥è®²è§£ <code>v8.0.0-beta.5</code> ä»¥ä¸Šç‰ˆæœ¬çš„è®¤è¯æ–¹å¼ï¼Œå³ä¸ªäººä¸­å¿ƒ token æ–¹å¼ï¼Œè¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ã€‚</p><h4 id=1-ä¿®æ”¹é…ç½®æ–‡ä»¶>1. ä¿®æ”¹é…ç½®æ–‡ä»¶ <a href=#1-%e4%bf%ae%e6%94%b9%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 class=anchor aria-hidden=true>#</a></h4><p>ä¿®æ”¹å¤œèºçš„é…ç½®æ–‡ä»¶ <code>etc/config.toml</code>ï¼Œç¡®ä¿é…ç½®äº† <code>HTTP.TokenAuth</code>ï¼Œå¹¶ä¸”è®¾ç½®äº† <code>Enable = true</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class=language-toml>...
[HTTP.RSA]
OpenRSA = false

[HTTP.TokenAuth]
Enable = true

[DB]
...
</code></pre><h4 id=2-è·å–-token>2. è·å– Token <a href=#2-%e8%8e%b7%e5%8f%96-token class=anchor aria-hidden=true>#</a></h4><p>ç™»å½•å¤œèºç›‘æ§ï¼Œè¿›å…¥å³ä¸Šè§’å¤´åƒï¼Œè¿›å…¥ä¸ªäººä¿¡æ¯é¡µé¢ï¼Œç‚¹å‡» â€œToken ç®¡ç†â€ é‚£ä¸ª Tabï¼Œç„¶åç‚¹å‡»â€œåˆ›å»º Tokenâ€ï¼Œéšä¾¿èµ·ä¸ªåå­—ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ª Tokenã€‚</p><img src=/img/usecase/api/01.png alt="create api token"><h4 id=3-ä½¿ç”¨-token>3. ä½¿ç”¨ Token <a href=#3-%e4%bd%bf%e7%94%a8-token class=anchor aria-hidden=true>#</a></h4><p>åœ¨è°ƒç”¨ API çš„æ—¶å€™ï¼Œéœ€è¦åœ¨ HTTP è¯·æ±‚çš„ Header ä¸­æ·»åŠ  <code>X-User-Token</code> å­—æ®µï¼Œå€¼ä¸ºä½ åˆšæ‰åˆ›å»ºçš„ Tokenã€‚ç”¨ cURL å‘½ä»¤è°ƒç”¨ API çš„ç¤ºä¾‹ï¼š</p><pre><code class=language-bash>curl -s -X GET &quot;http://&lt;NIGHTINGALE_HOST&gt;&lt;API_URL_PATH&gt;&quot; \
-H &quot;X-User-Token: &lt;YOUR_TOKEN&gt;&quot; \
-H &quot;Content-Type: application/json&quot;
</code></pre><p>æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹è·å–ä¸ªäººä¿¡æ¯çš„æ¥å£ï¼š</p><pre><code class=language-bash>curl -s -H &quot;X-User-Token: e6897d32-c237-4d27-a0fc-786345b682ea&quot; -H &quot;Content-Type: application/json&quot; 'http://10.99.1.106:8003/api/n9e/self/profile' | python3 -m json.tool
{
    &quot;dat&quot;: {
        &quot;id&quot;: 1,
        &quot;username&quot;: &quot;root&quot;,
        &quot;nickname&quot;: &quot;Root&quot;,
        &quot;phone&quot;: &quot;&quot;,
        &quot;email&quot;: &quot;qinxiaohui@flashcat.cloud&quot;,
        &quot;portrait&quot;: &quot;/image/avatar1.png&quot;,
        &quot;roles&quot;: [
            &quot;Admin&quot;
        ],
        &quot;contacts&quot;: {
            &quot;wecomid&quot;: &quot;qinxiaohui&quot;
        },
        &quot;maintainer&quot;: 0,
        &quot;create_at&quot;: 1733229739,
        &quot;create_by&quot;: &quot;system&quot;,
        &quot;update_at&quot;: 1749811268,
        &quot;update_by&quot;: &quot;root&quot;,
        &quot;belong&quot;: &quot;&quot;,
        &quot;admin&quot;: true,
        &quot;user_groups&quot;: null,
        &quot;busi_groups&quot;: null,
        &quot;last_active_time&quot;: 1749811088
    },
    &quot;err&quot;: &quot;&quot;
}
</code></pre><p>å¦‚ä¸Šï¼Œæ­£å¸¸è¿”å›äº†å†…å®¹ï¼Œè¡¨ç¤ºæˆåŠŸã€‚å¦‚æœä½ è¦å†™ç¨‹åºè°ƒç”¨ APIï¼Œéœ€è¦æ ¡éªŒï¼š</p><ul><li>å¤œèºè¿”å›çš„ HTTP çŠ¶æ€ç æ˜¯å¦ä¸º 200ï¼Œå¦‚æœçŠ¶æ€ç ä¸æ˜¯ 200ï¼Œè¡¨ç¤ºè¯·æ±‚å¤±è´¥ï¼Œæ­¤æ—¶å¯ä»¥æŠŠ Response Body æ‰“å°å‡ºæ¥ï¼ŒæŸ¥çœ‹å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚</li><li>å¦‚æœçŠ¶æ€ç æ˜¯ 200ï¼ŒResponse Body è‚¯å®šæ˜¯ JSONï¼Œæ­¤æ—¶è¿˜è¦æ ¡éªŒ JSON æ•°æ®ä¸­ <code>err</code> å­—æ®µæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºå°±æ˜¯æœ‰é—®é¢˜çš„ã€‚</li></ul><h3 id=äº†è§£æœ‰å“ªäº›æ¥å£>äº†è§£æœ‰å“ªäº›æ¥å£ <a href=#%e4%ba%86%e8%a7%a3%e6%9c%89%e5%93%aa%e4%ba%9b%e6%8e%a5%e5%8f%a3 class=anchor aria-hidden=true>#</a></h3><p>ç›´æ¥ä½¿ç”¨ Chrome æ‰“å¼€å¤œèºçš„é¡µé¢ï¼ŒæŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢åˆ° Network æ ‡ç­¾é¡µï¼Œç„¶ååœ¨é¡µé¢ä¸Šæ“ä½œï¼Œæ¯”å¦‚åˆ›å»ºä¸€ä¸ªå‘Šè­¦è§„åˆ™ï¼Œæˆ–è€…ä¿®æ”¹æœºå™¨æ ‡ç­¾ç­‰ã€‚ä½ ä¼šçœ‹åˆ° Network ä¸­æœ‰å¾ˆå¤š API è¯·æ±‚ï¼Œè¿™äº›å°±æ˜¯å¤œèºçš„ API æ¥å£ã€‚æ¯”å¦‚ï¼š</p><img src=/img/usecase/api/02.png alt="Chrome Network"><ul><li>Headers ä¸‹é¢å¯ä»¥çœ‹åˆ° Request Method å’Œ URL</li><li>Response ä¸‹é¢å¯ä»¥çœ‹åˆ°è¿”å›çš„å†…å®¹</li></ul><p>ä¸Šé¢çš„æ¥å£æ²¡æœ‰ä»»ä½• Query string å‚æ•°ï¼Œå¦‚æœæœ‰ Query string å‚æ•°ï¼Œé€šå¸¸ä¼šåœ¨ URL ä¸­æ˜¾ç¤ºã€‚å¦å¤–ï¼Œå¦‚æœæ˜¯ POST è¯·æ±‚ï¼Œå°±éœ€è¦ç ”ç©¶ Request Body çš„æ ¼å¼äº†ï¼Œå±Šæ—¶ä¼šå‡ºç°ä¸€ä¸ª Payload çš„ Tabï¼Œåœ¨ Payload ä¸‹é¢å¯ä»¥çœ‹åˆ° Request Body çš„å†…å®¹æ ¼å¼ã€‚</p><p>è¿™ç§æ–¹å¼æ¯”æ¥å£æ–‡æ¡£è¦å¥½å¤šäº†ï¼Œæ¥å£æ–‡æ¡£ç»å¸¸å¿˜è®°æ›´æ–°ï¼Œè€Œä¸”ä¸åŒç‰ˆæœ¬çš„å·®å¼‚ç»å¸¸å¿˜è®°è¯´æ˜ï¼Œè€Œé€šè¿‡æŸ¥çœ‹ Chrome çš„è¿™ç§æ–¹å¼ï¼Œé‚£ä¿¡æ¯ç»å¯¹æ˜¯ 100% å‡†ç¡®çš„ï¼Œæœ‰å“ªäº›æ¥å£ï¼Œæœ‰å“ªäº›å‚æ•°ï¼Œä¸€ç›®äº†ç„¶ï¼Œæ¯ä¸ªè¿ç»´ã€åç«¯ç ”å‘éƒ½åº”è¯¥æ‡‚å¾—è¿™ç§æ–¹å¼ã€‚</p><h2 id=æ•°æ®æ¨é€ç±»>æ•°æ®æ¨é€ç±» <a href=#%e6%95%b0%e6%8d%ae%e6%8e%a8%e9%80%81%e7%b1%bb class=anchor aria-hidden=true>#</a></h2><p>è‡ªå·±çš„ç¨‹åºæš´éœ²ç›‘æ§æ•°æ®ï¼Œé€šå¸¸æœ‰ä¸¤ä¸ªæ‰‹æ®µï¼Œä¸€ä¸ªæ˜¯åŸ‹å…¥ Prometheus SDKï¼Œæš´éœ² <code>/metrics</code> æ¥å£ï¼Œç„¶åç”¨ Prometheus æˆ– Categraf æ¥æŠ“å–ï¼ˆç§°ä¸º PULL æ¨¡å¼ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯ç›´æ¥è°ƒç”¨å¤œèºçš„ API æ¥å£ï¼Œæ¨é€ç›‘æ§æ•°æ®ï¼ˆç§°ä¸º PUSH æ¨¡å¼ï¼‰ï¼Œå¤œèºæ”¯æŒå¤šç§æ•°æ®æ¥æ”¶çš„æ¥å£ï¼ŒåŒ…æ‹¬ OpenTSDBã€Open-Falconã€PrometheusRemoteWriteã€Datadog ç­‰åè®®ã€‚</p><h3 id=æ¨é€æ ·ä¾‹>æ¨é€æ ·ä¾‹ <a href=#%e6%8e%a8%e9%80%81%e6%a0%b7%e4%be%8b class=anchor aria-hidden=true>#</a></h3><p>ä»¥ OpenTSDB åè®®ä¸ºä¾‹ï¼Œå¤œèºæ¥å£è·¯å¾„æ˜¯ <code>/opentsdb/put</code>ï¼ŒHTTP Method æ˜¯ POSTï¼ŒRequest Body é‡Œæ”¾ç½®ä½ è¦ä¸ŠæŠ¥çš„ç›‘æ§æ•°æ®ï¼Œæ ¼å¼æ ·ä¾‹å¦‚ä¸‹ï¼š</p><pre><code class=language-json>[
	{
		&quot;metric&quot;: &quot;cpu_usage_idle&quot;,
		&quot;timestamp&quot;: 1637732157,
		&quot;tags&quot;: {
			&quot;cpu&quot;: &quot;cpu-total&quot;,
			&quot;ident&quot;: &quot;c3-ceph01.bj&quot;
		},
		&quot;value&quot;: 30.5
	},
	{
		&quot;metric&quot;: &quot;cpu_usage_util&quot;,
		&quot;timestamp&quot;: 1637732157,
		&quot;tags&quot;: {
			&quot;cpu&quot;: &quot;cpu-total&quot;,
			&quot;ident&quot;: &quot;c3-ceph01.bj&quot;
		},
		&quot;value&quot;: 69.5
	}
]
</code></pre><p>æ˜¾ç„¶ï¼ŒJSON æœ€å¤–å±‚æ˜¯ä¸ªæ•°ç»„ï¼Œå¦‚æœåªä¸ŠæŠ¥ä¸€æ¡ç›‘æ§æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¸è¦å¤–é¢çš„ä¸­æ‹¬å·ï¼Œç›´æ¥æŠŠå¯¹è±¡ç»“æ„ä¸ŠæŠ¥ï¼š</p><pre><code class=language-json>{
  &quot;metric&quot;: &quot;cpu_usage_idle&quot;,
  &quot;timestamp&quot;: 1637732157,
  &quot;tags&quot;: {
    &quot;cpu&quot;: &quot;cpu-total&quot;,
    &quot;ident&quot;: &quot;c3-ceph01.bj&quot;
  },
  &quot;value&quot;: 30.5
}
</code></pre><p>æœåŠ¡ç«¯ä¼šçœ‹ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯ <code>[</code>ï¼Œæ¥åˆ¤æ–­ä¸ŠæŠ¥çš„æ˜¯æ•°ç»„ï¼Œè¿˜æ˜¯å•ä¸ªå¯¹è±¡ï¼Œè‡ªåŠ¨åšç›¸åº”çš„ Decodeã€‚å¦‚æœè§‰å¾—ä¸ŠæŠ¥çš„å†…å®¹å¤ªè¿‡å ç”¨å¸¦å®½ï¼Œä¹Ÿå¯ä»¥åœ¨ä½ çš„ç¨‹åºé‡Œå¯¹ Request Body åš gzip å‹ç¼©ï¼ŒåŒæ—¶åœ¨ HTTP Header é‡Œå¸¦ä¸Š <code>Content-Encoding: gzip</code> çš„ Headerã€‚</p><p>å„ä¸ªå­—æ®µçš„å«ä¹‰å¯ä»¥ Google ä¸€ä¸‹æˆ–è€…è¯¢é—® GPTï¼Œå…³é”®å­—æ˜¯ â€œOpenTSDB æ•°æ®æ ¼å¼é‡Œå„ä¸ªå­—æ®µçš„å«ä¹‰â€ã€‚è¿™é‡Œæˆ‘ç¨ä½œè¯´æ˜ï¼š</p><ul><li>metric: ç›‘æ§æŒ‡æ ‡çš„åç§°ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªè‹±æ–‡å•è¯ï¼Œå¤šä¸ªå•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥ï¼Œæ¯”å¦‚ <code>cpu_usage_idle</code></li><li>timestamp: æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯ç§’ï¼Œè¡¨ç¤ºç›‘æ§æ•°æ®çš„é‡‡é›†æ—¶é—´</li><li>tags: æ ‡ç­¾ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª map ç»“æ„ï¼Œkey æ˜¯æ ‡ç­¾åï¼Œvalue æ˜¯æ ‡ç­¾å€¼ï¼Œç”¨äºæè¿°æŒ‡æ ‡çš„å„ç±»ç»´åº¦ä¿¡æ¯æˆ–å…ƒä¿¡æ¯</li><li>value: ç›‘æ§æ•°æ®çš„å€¼ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºæŒ‡æ ‡çš„æ•°å€¼</li></ul><blockquote><p>ğŸŸ¢ æ³¨æ„ ident è¿™ä¸ªæ ‡ç­¾ï¼Œident æ˜¯ identity çš„ç¼©å†™ï¼Œè¡¨ç¤ºè®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœæ ‡ç­¾ä¸­æœ‰ ident æ ‡ç­¾ï¼Œn9e å°±è®¤ä¸ºè¿™ä¸ªç›‘æ§æ•°æ®æ˜¯æ¥è‡ªæŸä¸ªæœºå™¨çš„ï¼Œä¼šè‡ªåŠ¨è·å– ident çš„ valueï¼Œæ³¨å†Œåˆ°å¤œèºçš„æœºå™¨åˆ—è¡¨é‡Œã€‚</p></blockquote><p>å…¶ä»–å¸¸ç”¨çš„æ¥å£è·¯å¾„ï¼š</p><ul><li><code>/openfalcon/push</code>: Open-Falcon æ•°æ®æ¥æ”¶æ¥å£</li><li><code>/prometheus/v1/write</code>: Prometheus Remote Write æ•°æ®æ¥æ”¶æ¥å£</li></ul><h3 id=å¦‚ä½•è®¤è¯>å¦‚ä½•è®¤è¯ <a href=#%e5%a6%82%e4%bd%95%e8%ae%a4%e8%af%81 class=anchor aria-hidden=true>#</a></h3><p>å¦‚æœä½ çš„å¤œèºæš´éœ²åœ¨å…¬ç½‘ï¼Œé‚£æ‰€æœ‰äººéƒ½å¯ä»¥æ¨ç›‘æ§æ•°æ®ç»™ä½ ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å®‰å…¨çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å»ºè®®ï¼š</p><ul><li>ä¸è¦æŠŠå¤œèºæš´éœ²åœ¨å…¬ç½‘</li><li>å¦‚æœå®åœ¨è¦æš´éœ²åœ¨å…¬ç½‘ï¼Œè¦ç”¨ HTTPS åè®®ï¼ŒåŒæ—¶å¼€å¯ Basic Auth è®¤è¯</li></ul><p>å¦‚ä½•å¼€å¯ Basic Auth è®¤è¯å‘¢ï¼Ÿåœ¨ <code>etc/config.toml</code> ä¸­é…ç½®ï¼š</p><pre><code class=language-toml>[HTTP.APIForAgent]
Enable = true
[HTTP.APIForAgent.BasicAuth]
user001 = &quot;Pa55word01&quot;
user002 = &quot;Pa55word02&quot;
</code></pre><p>ä½ è‡ªå·±çš„ç¨‹åºè°ƒç”¨å¤œèºçš„æ¥å£ä¸ŠæŠ¥ç›‘æ§æ•°æ®ï¼Œæ­¤æ—¶ä½ çš„ç¨‹åºå°±ç›¸å½“äºä¸€ä¸ª agent çš„è§’è‰²ï¼Œæ‰€ä»¥å°±æ˜¯è·Ÿ <code>HTTP.APIForAgent</code> è¿™å—çš„é…ç½®ç›¸å…³ã€‚</p><ul><li><code>HTTP.APIForAgent</code> ä¸‹é¢çš„ Enable é¦–å…ˆè¦è®¾ç½®ä¸º trueï¼Œæ‰ä¼šå¯ç”¨ç›¸å…³æ¥å£ï¼Œå¦åˆ™ä½ è°ƒç”¨é‚£äº›ä¸ŠæŠ¥æ•°æ®çš„æ¥å£éƒ½ä¼šæŠ¥ 404 Not Found é”™è¯¯ã€‚</li><li><code>HTTP.APIForAgent.BasicAuth</code> ä¸‹é¢çš„é…ç½®æ˜¯ç”¨æˆ·åå’Œå¯†ç ï¼Œæ ¼å¼æ˜¯ <code>username = "password"</code>ï¼Œä½ å¯ä»¥è®¾ç½®å¤šä¸ªç”¨æˆ·ï¼Œè¿™äº›ç”¨æˆ·çš„è®¤è¯æ–¹å¼æ˜¯ Basic Authã€‚å¦‚æœ <code>HTTP.APIForAgent.BasicAuth</code> ä¸‹é¢ä¸€ä¸ªç”¨æˆ·ä¹Ÿæ²¡æœ‰é…ç½®ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºä¸éœ€è¦è®¤è¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥æ¨é€æ•°æ®ã€‚</li></ul><blockquote><p>ğŸ”´ æ³¨æ„ï¼šè·Ÿ <code>HTTP.APIForAgent</code> ç´§æŒ¨ç€çš„è¿˜æœ‰ä¸€ä¸ª <code>HTTP.APIForService</code> é…ç½®æ®µï¼Œç”¨äºæä¾›ä¸€äº›æ¥å£ç»™ n9e-edge ä½¿ç”¨ï¼Œå³å¤œèºçš„è¾¹ç¼˜æœºæˆ¿éƒ¨ç½²æ¨¡å¼ï¼Œå¦‚æœä½ æ²¡æœ‰ç”¨åˆ° n9e-edgeï¼Œä¸€å®šè¦æŠŠ <code>HTTP.APIForService</code> ç»™ Disable æ‰ï¼Œå³ <code>HTTP.APIForService</code> ä¸‹é¢çš„ Enable è®¾ç½®ä¸º falseï¼Œé¿å…å®‰å…¨é£é™©ã€‚</p></blockquote><div class=docs-edit-tip>ğŸ¯ ç”±äºè¯»è€…æ°´å¹³å‚å·®ä¸é½ï¼Œé‡å£éš¾è°ƒï¼Œç¤¾åŒºå°ä¼™ä¼´ä¸€ç›´åœ¨æŒç»­æ›´æ–°ä¼˜åŒ–æ–‡æ¡£å†…å®¹ï¼Œå¦‚æœæ‚¨è§‰å¾—æœ¬é¡µæ–‡æ¡£å†…å®¹æœ‰è¯¯æˆ–ä¸å¤Ÿå®Œå–„ï¼Œæ¬¢è¿æ‚¨å‚ä¸åˆ°æ–‡æ¡£çš„ç¼–å†™ä¸­æ¥ï¼Œç‚¹å‡»ä¸‹æ–¹çš„ Edit this page on GitHub å³å¯ç¼–è¾‘ ğŸ‘‡</div><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"><div class=edit-page><a href=https://github.com/n9e/n9e.github.io/blob/master/content/zh/docs/usecase/api.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></div></div><div class="docs-navigation d-flex justify-content-between"><a href=/zh/docs/usecase/sso/><div class="card my-1"><div class="card-body py-2">&larr; å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰</div></div></a><a class=ms-auto href=/zh/docs/faq/global-callback/><div class="card my-1"><div class="card-body py-2">å…¨å±€å›è°ƒä¸‹çº¿ï¼Œé‚£å…¨å±€åœºæ™¯æ€ä¹ˆå¤„ç†ï¼Ÿ &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>&copy; 2025 CCFÂ·Nightingale, all rights reserved.</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.0a0106334435d4110713bfaff4acaf02533b0c56d44412a74e9518db07672ddb7e099a9c7517bc9cb529e2ddd4ae2e438b40b720288900d5e74fb6d8928d9097.js integrity="sha512-CgEGM0Q11BEHE7+v9KyvAlM7DFbURBKnTpUY2wdnLdt+CZqcdRe8nLUp4t3Uri5Di0C3ICiJANXnT7bYko2Qlw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.0d31f7af12feb83ee633b6351b023ee643ea3412376fbaa09c5a26d1a5ef999939f1ad379a5b12e1199a2c7d72ae1b23f633060a679628dcbfb0e72378cd20be.js integrity="sha512-DTH3rxL+uD7mM7Y1GwI+5kPqNBI3b7qgnFom0aXvmZk58a03mlsS4RmaLH1yrhsj9jMGCmeWKNy/sOcjeM0gvg==" crossorigin=anonymous defer></script>
<script src=/main.min.6afc4bf655f45ae3e63629ec95be8bd2e0e792084b5635a6fe70b169fa9d1491638b3a4e900ed59c2e017ca18768e5c392e110d0e1336509f49f7dc418d16eef.js integrity="sha512-avxL9lX0WuPmNinslb6L0uDnkghLVjWm/nCxafqdFJFjizpOkA7VnC4BfKGHaOXDkuEQ0OEzZQn0n33EGNFu7w==" crossorigin=anonymous defer></script>
<script src=https://n9e.github.io/index.min.817f8872b658f71dc245d9ee44f770e3f6e7d311ef23ea7ff8ebe44511f8b52f3b05ff5834400f2f967d1e4c7d8863587975cac8e693b407f3bdb3f6762ec2a5.js integrity="sha512-gX+IcrZY9x3CRdnuRPdw4/bn0xHvI+p/+OvkRRH4tS87Bf9YNEAPL5Z9Hkx9iGNYeXXKyOaTtAfzvbP2di7CpQ==" crossorigin=anonymous defer></script>
<script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?9d7cc507a7aae60b28b5e04bb995492a",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></body></html>