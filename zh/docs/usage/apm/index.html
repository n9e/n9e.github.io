<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://n9e.github.io/main.ac11ddb4c05d63d9306a2e99fe8ab3a89c059bd13af027151f267942e6ea1a6d4242aacd51b034166a296b7833f683a4395206df505071159d1835d8158732b5.css integrity="sha512-rBHdtMBdY9kwai6Z/oqzqJwFm9E68CcVHyZ5QubqGm1CQqrNUbA0Fmopa3gz9oOkOVIG31BQcRWdGDXYFYcytQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>应用监控 - 夜莺云原生监控</title><meta name=description content="夜莺（ Nightingale ）通过 Prometheus SDK 监控应用程序"><link rel=canonical href=https://n9e.github.io/zh/docs/usage/apm/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="应用监控"><meta property="og:description" content="夜莺（ Nightingale ）通过 Prometheus SDK 监控应用程序"><meta property="og:url" content="https://n9e.github.io/zh/docs/usage/apm/"><meta property="og:site_name" content="Nightingale"><meta property="article:published_time" content="2020-10-06T08:48:57+00:00"><meta property="article:modified_time" content="2023-08-08T16:22:25+08:00"><meta property="og:image" content="https://n9e.github.io/doks.png"><meta property="og:image:alt" content="Nightingale"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@ulricqin"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="应用监控"><meta name=twitter:description content="夜莺（ Nightingale ）通过 Prometheus SDK 监控应用程序"><meta name=twitter:image content="https://n9e.github.io/doks.png"><meta name=twitter:image:alt content="应用监控"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://n9e.github.io/#/schema/organization/1","name":"Doks","url":"https://n9e.github.io/","sameAs":["https://twitter.com/ulricqin","https://github.com/ccfos/nightingale"],"logo":{"@type":"ImageObject","@id":"https://n9e.github.io/#/schema/image/1","url":"https://n9e.github.io/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://n9e.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://n9e.github.io/#/schema/website/1","url":"https://n9e.github.io/","name":"Nightingale","description":"夜莺监控(官网),云原生监控,Kubernetes Monitoring,开源监控,国产监控,CCF夜莺","publisher":{"@id":"https://n9e.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://n9e.github.io/zh/docs/usage/apm/","url":"https://n9e.github.io/zh/docs/usage/apm/","name":"应用监控","description":"夜莺（ Nightingale ）通过 Prometheus SDK 监控应用程序","isPartOf":{"@id":"https://n9e.github.io/#/schema/website/1"},"about":{"@id":"https://n9e.github.io/#/schema/organization/1"},"datePublished":"2020-10-06T08:48:57CET","dateModified":"2023-08-08T16:22:25CET","breadcrumb":{"@id":"https://n9e.github.io/zh/docs/usage/apm/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://n9e.github.io/zh/docs/usage/apm/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://n9e.github.io/zh/docs/usage/apm/"]}]},{"@type":"BreadcrumbList","@id":"https://n9e.github.io/zh/docs/usage/apm/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://n9e.github.io/","url":"https://n9e.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://n9e.github.io/zh/","url":"https://n9e.github.io/zh/","name":"Zh"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://n9e.github.io/zh/docs/","url":"https://n9e.github.io/zh/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://n9e.github.io/zh/docs/usage/","url":"https://n9e.github.io/zh/docs/usage/","name":"Usage"}},{"@type":"ListItem","position":5,"item":{"@id":"https://n9e.github.io/zh/docs/usage/apm/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://n9e.github.io/#/schema/article/1","headline":"应用监控","description":"夜莺（ Nightingale ）通过 Prometheus SDK 监控应用程序","isPartOf":{"@id":"https://n9e.github.io/zh/docs/usage/apm/"},"mainEntityOfPage":{"@id":"https://n9e.github.io/zh/docs/usage/apm/"},"datePublished":"2020-10-06T08:48:57CET","dateModified":"2023-08-08T16:22:25CET","author":{"@id":"https://n9e.github.io/#/schema/person/2"},"publisher":{"@id":"https://n9e.github.io/#/schema/organization/1"},"image":{"@id":"https://n9e.github.io/zh/docs/usage/apm/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://n9e.github.io/#/schema/person/2","name":"Henk Verlinde","sameAs":["https://twitter.com/henkverlinde","https://www.linkedin.com/in/henkverlinde/","https://github.com/UlricQin"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://n9e.github.io/zh/docs/usage/apm/#/schema/image/2","url":"https://n9e.github.io/doks.png","contentUrl":"https://n9e.github.io/doks.png","caption":"应用监控"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://n9e.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://n9e.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://n9e.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://n9e.github.io/site.webmanifest></head><body class="docs single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/zh/ aria-label=Nightingale>Nightingale</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/zh/>Nightingale</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://flashcat.cloud/docs/>文档</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/ccfos/nightingale><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="dropdown order-md-2"><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
ZH
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-end shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=/zh/docs/usage/apm/>Chinese</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=/zh/en hreflang=en lang=en>English</a></li></ul></div></nav></header><nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation"><div class="container-xxl d-flex align-items-md-center"><form class="doks-search position-relative flex-grow-1 me-auto"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-e05dce83e5129785b9f316978a14b896 aria-expanded=false>
简介</button><div class=collapse id=section-e05dce83e5129785b9f316978a14b896><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/introduction/>夜莺介绍</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/consulting/></a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/opensource-vs-enterprise/>企业版</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-039d392cea6b20609a2aa94015441bad aria-expanded=false>
安装部署</button><div class=collapse id=section-039d392cea6b20609a2aa94015441bad><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/first/>开始之前</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/compose/>Docker Compose</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/helm/>Helm</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/server/>服务端组件部署</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/victoria/>VictoriaMetrics</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/ibex/>Ibex</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-15ad62fa6c036f6a916b4336fe04c118 aria-expanded=false>
采集器</button><div class=collapse id=section-15ad62fa6c036f6a916b4336fe04c118><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/categraf/>Categraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/telegraf/>Telegraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/datadog-agent/>Datadog-Agent</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/grafana-agent/>Grafana-Agent</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/falcon-plugin/>Falcon-Plugin</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-32b9362149d032ed724daac36671f31a aria-expanded=true>
使用手册</button><div class="collapse show" id=section-32b9362149d032ed724daac36671f31a><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/share/>藏经阁</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/video/>入门教程</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/snmp/>SNMP</a></li><li><a class="docs-link rounded active" href=https://n9e.github.io/zh/docs/usage/apm/>应用监控</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/mtail/>Mtail日志监控</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/esalert/>ES日志告警</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/jvm/>JVM监控</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/notify/>告警通知</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/format/>告警格式</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/aialert/>智能异常检测</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-db974238714ca8de634a7ce1d083a14f aria-expanded=false>
API</button><div class=collapse id=section-db974238714ca8de634a7ce1d083a14f><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/api/read/>数据读取</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/api/push/>数据推送</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/api/webapi/>Webapi接口</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-2e307a62e897bd84f1fcb3f4443e46dc aria-expanded=false>
附录</button><div class=collapse id=section-2e307a62e897bd84f1fcb3f4443e46dc><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-99d0251d969c569e15cd7b8de1245c49 aria-expanded=false>
Grafana-agent</button><div class=collapse id=section-99d0251d969c569e15cd7b8de1245c49><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/grafana-agent-overview/>总览</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/k8s_metrics/>收集metrics</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/k8s_logs/>收集logs</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/k8s_traces/>收集trace</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/scrape_exporters/>收集三方exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/how-to-monitoring-k8s/>监控K8s</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-415320131958c70f4f250ca4d7e63bbd aria-expanded=false>
integrations</button><div class=collapse id=section-415320131958c70f4f250ca4d7e63bbd><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/overview/>Overview</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/node-exporter-config/>Node Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/mysqld-exporter-config/>MySQLd Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/process-exporter-config/>Process Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/cadvisor-config/>cAdvisor Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/windows-exporter-config/>Windows Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/postgres-exporter-config/>Postgres Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/mongodb-exporter-config/>Mongodb Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/redis-exporter-config/>Redis Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/memcached-exporter-config/>Memcached Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/kafka-exporter-config/>Kafka Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/elasticsearch-exporter-config/>Elasticsearch Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/consul-exporter-config/>Consul Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/dnsmasq-exporter-config/>dnsmasq Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/github-exporter-config/>Github Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/statsd-exporter-config/>Statsd Exporter</a></li></ul></div></li></ul></div></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-57825f7de0361f1c3eabf5868a125de3 aria-expanded=false>
用户案例研究</button><div class=collapse id=section-57825f7de0361f1c3eabf5868a125de3><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/usecase/a-startup-way-to-building-monitoring-system/>高科技Startup构建监控体系之路</a></li></ul></div></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-e05dce83e5129785b9f316978a14b896 aria-expanded=false>
简介</button><div class=collapse id=section-e05dce83e5129785b9f316978a14b896><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/introduction/>夜莺介绍</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/consulting/></a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/prologue/opensource-vs-enterprise/>企业版</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-039d392cea6b20609a2aa94015441bad aria-expanded=false>
安装部署</button><div class=collapse id=section-039d392cea6b20609a2aa94015441bad><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/first/>开始之前</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/compose/>Docker Compose</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/helm/>Helm</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/server/>服务端组件部署</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/victoria/>VictoriaMetrics</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/install/ibex/>Ibex</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-15ad62fa6c036f6a916b4336fe04c118 aria-expanded=false>
采集器</button><div class=collapse id=section-15ad62fa6c036f6a916b4336fe04c118><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/categraf/>Categraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/telegraf/>Telegraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/datadog-agent/>Datadog-Agent</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/grafana-agent/>Grafana-Agent</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/agent/falcon-plugin/>Falcon-Plugin</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-32b9362149d032ed724daac36671f31a aria-expanded=true>
使用手册</button><div class="collapse show" id=section-32b9362149d032ed724daac36671f31a><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/share/>藏经阁</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/video/>入门教程</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/snmp/>SNMP</a></li><li><a class="docs-link rounded active" href=https://n9e.github.io/zh/docs/usage/apm/>应用监控</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/mtail/>Mtail日志监控</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/esalert/>ES日志告警</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/jvm/>JVM监控</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/notify/>告警通知</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/format/>告警格式</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/usage/aialert/>智能异常检测</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-db974238714ca8de634a7ce1d083a14f aria-expanded=false>
API</button><div class=collapse id=section-db974238714ca8de634a7ce1d083a14f><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/api/read/>数据读取</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/api/push/>数据推送</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/api/webapi/>Webapi接口</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-2e307a62e897bd84f1fcb3f4443e46dc aria-expanded=false>
附录</button><div class=collapse id=section-2e307a62e897bd84f1fcb3f4443e46dc><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-99d0251d969c569e15cd7b8de1245c49 aria-expanded=false>
Grafana-agent</button><div class=collapse id=section-99d0251d969c569e15cd7b8de1245c49><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/grafana-agent-overview/>总览</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/k8s_metrics/>收集metrics</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/k8s_logs/>收集logs</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/k8s_traces/>收集trace</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/scrape_exporters/>收集三方exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/how-to-monitoring-k8s/>监控K8s</a></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-415320131958c70f4f250ca4d7e63bbd aria-expanded=false>
integrations</button><div class=collapse id=section-415320131958c70f4f250ca4d7e63bbd><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/overview/>Overview</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/node-exporter-config/>Node Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/mysqld-exporter-config/>MySQLd Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/process-exporter-config/>Process Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/cadvisor-config/>cAdvisor Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/windows-exporter-config/>Windows Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/postgres-exporter-config/>Postgres Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/mongodb-exporter-config/>Mongodb Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/redis-exporter-config/>Redis Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/memcached-exporter-config/>Memcached Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/kafka-exporter-config/>Kafka Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/elasticsearch-exporter-config/>Elasticsearch Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/consul-exporter-config/>Consul Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/dnsmasq-exporter-config/>dnsmasq Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/github-exporter-config/>Github Exporter</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/grafana-agent/integrations/statsd-exporter-config/>Statsd Exporter</a></li></ul></div></li></ul></div></li><li class="my-1 ms-3"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-57825f7de0361f1c3eabf5868a125de3 aria-expanded=false>
用户案例研究</button><div class=collapse id=section-57825f7de0361f1c3eabf5868a125de3><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/zh/docs/appendix/usecase/a-startup-way-to-building-monitoring-system/>高科技Startup构建监控体系之路</a></li></ul></div></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#写在前面>写在前面</a></li><li><a href=#埋点工具>埋点工具</a></li><li><a href=#夜莺自身监控>夜莺自身监控</a><ul><li><a href=#webapi>Webapi</a></li><li><a href=#server>Server</a></li><li><a href=#数据抓取>数据抓取</a></li></ul></li><li><a href=#参考资料>参考资料</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>应用监控</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#写在前面>写在前面</a></li><li><a href=#埋点工具>埋点工具</a></li><li><a href=#夜莺自身监控>夜莺自身监控</a><ul><li><a href=#webapi>Webapi</a></li><li><a href=#server>Server</a></li><li><a href=#数据抓取>数据抓取</a></li></ul></li><li><a href=#参考资料>参考资料</a></li></ul></nav></div></nav><h2 id=写在前面>写在前面 <a href=#%e5%86%99%e5%9c%a8%e5%89%8d%e9%9d%a2 class=anchor aria-hidden=true>#</a></h2><p>应用监控实际要比 OS、中间件的监控更为关键，因为某个 OS 层面的指标异常，比如 CPU 飙高了，未必会影响终端用户的体验，但是应用层面的监控指标出问题，通常就会影响客户的感受、甚至影响客户的付费。</p><p>针对应用监控，Google提出了 4 个黄金指标，分别是：流量、延迟、错误、饱和度，其中前面 3 个指标都可以通过内嵌 SDK 的方式埋点采集，本节重点介绍这种方式。当然了，内嵌 SDK 有较强的代码侵入性，如果业务研发难以配合，也可以采用解析日志的方案，这个超出了夜莺（夜莺是指标监控系统）的范畴，大家如果感兴趣，可以了解一下<a href=https://flashcat.cloud/>快猫的商业化产品</a></p><h2 id=埋点工具>埋点工具 <a href=#%e5%9f%8b%e7%82%b9%e5%b7%a5%e5%85%b7 class=anchor aria-hidden=true>#</a></h2><p>最常见的通用埋点工具有两个，一个是 statsd，一个是 prometheus SDK，当然，各个语言也会有自己的更方便的方式，比如 Java 生态使用 micrometer 较多，如果是 SpringBoot 的程序，则使用 actuator 会更便捷，actuator 底层就是使用 micrometer。</p><h2 id=夜莺自身监控>夜莺自身监控 <a href=#%e5%a4%9c%e8%8e%ba%e8%87%aa%e8%ba%ab%e7%9b%91%e6%8e%a7 class=anchor aria-hidden=true>#</a></h2><p>我们就以夜莺自身的代码举例，讲解如何内嵌埋点工具，这里选择 prometheus SDK 作为埋点方案。</p><p>夜莺核心模块有两个，Webapi 主要是提供 HTTP 接口给 JavaScript 调用，Server 主要是负责接收监控数据，处理告警规则，这两个模块都引入了 Prometheus 的 Go 的SDK，用此方式做 App Performance 监控，本节以夜莺的代码为例，讲解如何使用 Prometheus 的 SDK。</p><h3 id=webapi>Webapi <a href=#webapi class=anchor aria-hidden=true>#</a></h3><p>Webapi 模块主要统计两个内容，一个是请求的数量统计，一个是请求的延迟统计，统计时，要用不同的 Label 做维度区分，后面就可以通过不同的维度做多种多样的统计分析，对于 HTTP 请求，规划 4 个核心 Label，分别是：service、code、path、method。service 标识服务名称，要求全局唯一，便于和其他服务名称区分开，比如 Webapi 模块，就定义为 n9e-webapi，code 是 HTTP 返回的状态码，200 就表示成功数量，其他 code 就是失败的，后面我们可以据此统计成功率，method 是 HTTP 方法，GET、POST、PUT、DELETE 等，比如新增用户和获取用户列表可能都是 <code>/api/n9e/users</code>，从路径上无法区分，只能再加上 method 才能区分开。</p><p>path 着重说一下，表示请求路径，比如上面提到的<code>/api/n9e/users</code>，但是，在 restful 实践中，url 中经常会有参数，比如获取编号为1的用户的信息，接口是<code>/api/n9e/user/1</code>，获取编号为2的用户信息，接口是<code>/api/n9e/user/2</code>，如果这俩带有用户编号的 url 都作为 Label，会造成时序库索引爆炸，而且从业务方使用角度来看，我们也不关注编号为1的用户获取请求还是编号为2的用户获取请求，而是关注整体的<code>GET /api/n9e/user/:id</code>这个接口的监控数据。所以我们在设置 Label 的时候，要把path设置为<code>/api/n9e/user/:id</code>，而不是那具体的带有用户编号的 url 路径。夜莺用的 gin 框架，gin 框架有个 FullPath 方法就是获取这个信息的，比较方便。</p><p>首先，我们在 Webapi 下面创建一个 stat package，放置相关统计变量：</p><pre><code class=language-go>package stat

import (
	&quot;time&quot;

	&quot;github.com/prometheus/client_golang/prometheus&quot;
)

const Service = &quot;n9e-webapi&quot;

var (
	labels = []string{&quot;service&quot;, &quot;code&quot;, &quot;path&quot;, &quot;method&quot;}

	uptime = prometheus.NewCounterVec(
		prometheus.CounterOpts{
			Name: &quot;uptime&quot;,
			Help: &quot;HTTP service uptime.&quot;,
		}, []string{&quot;service&quot;},
	)

	RequestCounter = prometheus.NewCounterVec(
		prometheus.CounterOpts{
			Name: &quot;http_request_count_total&quot;,
			Help: &quot;Total number of HTTP requests made.&quot;,
		}, labels,
	)

	RequestDuration = prometheus.NewHistogramVec(
		prometheus.HistogramOpts{
			Buckets: []float64{.01, .1, 1, 10},
			Name:    &quot;http_request_duration_seconds&quot;,
			Help:    &quot;HTTP request latencies in seconds.&quot;,
		}, labels,
	)
)

func Init() {
	// Register the summary and the histogram with Prometheus's default registry.
	prometheus.MustRegister(
		uptime,
		RequestCounter,
		RequestDuration,
	)

	go recordUptime()
}

// recordUptime increases service uptime per second.
func recordUptime() {
	for range time.Tick(time.Second) {
		uptime.WithLabelValues(Service).Inc()
	}
}
</code></pre><p>uptime 变量是顺手为之，统计进程启动了多久时间，不用太关注，RequestCounter 和 RequestDuration，分别统计请求流量和请求延迟。Init 方法是在 Webapi 模块进程初始化的时候调用，所以进程一起，就会自动注册好。</p><p>然后我们写一个 middleware，在请求进来的时候拦截一下，省的每个请求都要去统计，middleware 方法的代码如下：</p><pre><code class=language-go>import (
	...
	promstat &quot;github.com/didi/nightingale/v5/src/webapi/stat&quot;
)

func stat() gin.HandlerFunc {
	return func(c *gin.Context) {
		start := time.Now()
		c.Next()

		code := fmt.Sprintf(&quot;%d&quot;, c.Writer.Status())
		method := c.Request.Method
		labels := []string{promstat.Service, code, c.FullPath(), method}

		promstat.RequestCounter.WithLabelValues(labels...).Inc()
		promstat.RequestDuration.WithLabelValues(labels...).Observe(float64(time.Since(start).Seconds()))
	}
}
</code></pre><p>有了这个 middleware 之后，new 出 gin 的 engine 的时候，就立马 Use 一下，代码如下：</p><pre><code class=language-go>...
r := gin.New()
r.Use(stat())
...
</code></pre><p>最后，监控数据要通过<code>/metrics</code>接口暴露出去，我们要暴露这个请求端点，代码如下：</p><pre><code class=language-go>import (
	...
	&quot;github.com/prometheus/client_golang/prometheus/promhttp&quot;
)

func configRoute(r *gin.Engine, version string) {
	...
	r.GET(&quot;/metrics&quot;, gin.WrapH(promhttp.Handler()))
}
</code></pre><p>如上，每个 Webapi 的接口的流量和成功率都可以监控到了。如果你也部署了夜莺，请求 Webapi 的端口（默认是18000）的 <code>/metrics</code> 接口看看吧。</p><div class="alert alert-doks d-flex" role=alert><div class="flex-shrink-1 alert-icon">💡</div><div class=w-100>如果服务部署多个实例，甚至多个 region，多个环境，上面的 4 个 Label 就不够用了，因为只有这 4 个 Label 不足以唯一标识一个具体的实例，此时需要 env、region、instance 这种 Label，这些 Label不 需要在代码里埋点，在采集的时候一般可以附加额外的标签，通过附加标签的方式来处理即可</div></div><h3 id=server>Server <a href=#server class=anchor aria-hidden=true>#</a></h3><p>Server 模块的监控，和 Webapi 模块的监控差异较大，因为关注点不同，Webapi 关注的是 HTTP 接口的请求量和延迟，而 Server 模块关注的是接收了多少监控指标，内部事件队列的长度，从数据库同步告警规则花费多久，同步了多少条数据等，所以，我们也需要在 Server 的 package 下创建一个 stat 包，stat 包下放置 stat.go，内容如下：</p><pre><code class=language-go>package stat

import (
	&quot;github.com/prometheus/client_golang/prometheus&quot;
)

const (
	namespace = &quot;n9e&quot;
	subsystem = &quot;server&quot;
)

var (
	// 各个周期性任务的执行耗时
	GaugeCronDuration = prometheus.NewGaugeVec(prometheus.GaugeOpts{
		Namespace: namespace,
		Subsystem: subsystem,
		Name:      &quot;cron_duration&quot;,
		Help:      &quot;Cron method use duration, unit: ms.&quot;,
	}, []string{&quot;cluster&quot;, &quot;name&quot;})

	// 从数据库同步数据的时候，同步的条数
	GaugeSyncNumber = prometheus.NewGaugeVec(prometheus.GaugeOpts{
		Namespace: namespace,
		Subsystem: subsystem,
		Name:      &quot;cron_sync_number&quot;,
		Help:      &quot;Cron sync number.&quot;,
	}, []string{&quot;cluster&quot;, &quot;name&quot;})

	// 从各个接收接口接收到的监控数据总量
	CounterSampleTotal = prometheus.NewCounterVec(prometheus.CounterOpts{
		Namespace: namespace,
		Subsystem: subsystem,
		Name:      &quot;samples_received_total&quot;,
		Help:      &quot;Total number samples received.&quot;,
	}, []string{&quot;cluster&quot;, &quot;channel&quot;})

	// 产生的告警总量
	CounterAlertsTotal = prometheus.NewCounterVec(prometheus.CounterOpts{
		Namespace: namespace,
		Subsystem: subsystem,
		Name:      &quot;alerts_total&quot;,
		Help:      &quot;Total number alert events.&quot;,
	}, []string{&quot;cluster&quot;})

	// 内存中的告警事件队列的长度
	GaugeAlertQueueSize = prometheus.NewGaugeVec(prometheus.GaugeOpts{
		Namespace: namespace,
		Subsystem: subsystem,
		Name:      &quot;alert_queue_size&quot;,
		Help:      &quot;The size of alert queue.&quot;,
	}, []string{&quot;cluster&quot;})
)

func Init() {
	// Register the summary and the histogram with Prometheus's default registry.
	prometheus.MustRegister(
		GaugeCronDuration,
		GaugeSyncNumber,
		CounterSampleTotal,
		CounterAlertsTotal,
		GaugeAlertQueueSize,
	)
}
</code></pre><p>定义一个监控指标，除了 name 之外，还可以设置 namespace、subsystem，最终通过 <code>/metrics</code> 接口暴露的时候，可以发现：监控指标的最终名字，就是<code>$namespace_$subsystem_$name</code>，三者拼接在一起。Webapi 模块的监控代码中我们看到了 counter 类型和 histogram 类型的处理，这次我们拿 GaugeAlertQueueSize 举例，这是个 GAUGE 类型的统计数据，起一个 goroutine 周期性获取队列长度，然后 Set 到 GaugeAlertQueueSize 中：</p><pre><code class=language-go>package engine

import (
	&quot;context&quot;
	&quot;time&quot;

	&quot;github.com/didi/nightingale/v5/src/server/config&quot;
	promstat &quot;github.com/didi/nightingale/v5/src/server/stat&quot;
)

func Start(ctx context.Context) error {
	...
	go reportQueueSize()
	return nil
}

func reportQueueSize() {
	for {
		time.Sleep(time.Second)
		promstat.GaugeAlertQueueSize.WithLabelValues(config.C.ClusterName).Set(float64(EventQueue.Len()))
	}
}

</code></pre><p>另外，Init 方法要在 Server 模块初始化的时候调用，Server 的 router.go 中要暴露 <code>/metrics</code> 端点路径，这些就不再详述了，大家可以扒拉一下夜莺的代码看一下。</p><h3 id=数据抓取>数据抓取 <a href=#%e6%95%b0%e6%8d%ae%e6%8a%93%e5%8f%96 class=anchor aria-hidden=true>#</a></h3><p>应用自身的监控数据已经通过 <code>/metrics</code> 接口暴露了，后续采集规则可以在 prometheus.yml 中配置，prometheus.yml 中有个 section 叫：scrape_configs 可以配置抓取目标，这是 Prometheus 范畴的知识了，大家可以参考<a href=https://prometheus.io/>Prometheus官网</a>。</p><p>或者，大家也可以使用 Categraf 的 prometheus 插件抓取 <code>/metrics</code> 数据，就是把 url 配置进去即可，比较容易。</p><h2 id=参考资料>参考资料 <a href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99 class=anchor aria-hidden=true>#</a></h2><ul><li><a href=https://prometheus.io/docs/instrumenting/clientlibs/>https://prometheus.io/docs/instrumenting/clientlibs/</a></li><li><a href=https://github.com/prometheus/client_golang/tree/master/examples>https://github.com/prometheus/client_golang/tree/master/examples</a></li></ul><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"><div class=edit-page><a href=https://github.com/n9e/n9e.github.io/blob/master/content/zh/docs/usage/apm.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></div></div><div class="docs-navigation d-flex justify-content-between"><a href=/zh/docs/usage/snmp/><div class="card my-1"><div class="card-body py-2">&larr; SNMP</div></div></a><a class=ms-auto href=/zh/docs/usage/mtail/><div class="card my-1"><div class="card-body py-2">Mtail日志监控 &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>&copy; 2022 CCF·Nightingale, all rights reserved.</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.0a0106334435d4110713bfaff4acaf02533b0c56d44412a74e9518db07672ddb7e099a9c7517bc9cb529e2ddd4ae2e438b40b720288900d5e74fb6d8928d9097.js integrity="sha512-CgEGM0Q11BEHE7+v9KyvAlM7DFbURBKnTpUY2wdnLdt+CZqcdRe8nLUp4t3Uri5Di0C3ICiJANXnT7bYko2Qlw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.0d31f7af12feb83ee633b6351b023ee643ea3412376fbaa09c5a26d1a5ef999939f1ad379a5b12e1199a2c7d72ae1b23f633060a679628dcbfb0e72378cd20be.js integrity="sha512-DTH3rxL+uD7mM7Y1GwI+5kPqNBI3b7qgnFom0aXvmZk58a03mlsS4RmaLH1yrhsj9jMGCmeWKNy/sOcjeM0gvg==" crossorigin=anonymous defer></script>
<script src=/main.min.6afc4bf655f45ae3e63629ec95be8bd2e0e792084b5635a6fe70b169fa9d1491638b3a4e900ed59c2e017ca18768e5c392e110d0e1336509f49f7dc418d16eef.js integrity="sha512-avxL9lX0WuPmNinslb6L0uDnkghLVjWm/nCxafqdFJFjizpOkA7VnC4BfKGHaOXDkuEQ0OEzZQn0n33EGNFu7w==" crossorigin=anonymous defer></script>
<script src=https://n9e.github.io/index.min.ebe74dca0458710217b1121bfa4d8889c3643ed21841820c0c54fe9c51f42bb8724b20fbe37594dcec79cf5d5af5eb9016047385f28980160f8dfe29912ef33d.js integrity="sha512-6+dNygRYcQIXsRIb+k2IicNkPtIYQYIMDFT+nFH0K7hySyD743WU3Ox5z11a9euQFgRzhfKJgBYPjf4pkS7zPQ==" crossorigin=anonymous defer></script>
<script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?9d7cc507a7aae60b28b5e04bb995492a",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></body></html>