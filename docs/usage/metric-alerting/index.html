<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://n9e.github.io/main.7b58de4a5990880200af4bf0d216e45826b72930af377efb61dc530be6ed1a2a71c0462002b812c1cb6f5352d58734dc9fc8620763f6b178458f31a889d5183d.css integrity="sha512-e1jeSlmQiAIAr0vw0hbkWCa3KTCvN377YdxTC+btGipxwEYgArgSwctvU1LVhzTcn8hiB2P2sXhFjzGoidUYPQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Metric Alerting - Nightingale</title><meta name=description content="Nightingale monitoring supports metric alerting. Based on user-configured alert rules, it periodically queries data sources and triggers alerts when the data in the data sources meets the alert thresholds."><link rel=canonical href=https://n9e.github.io/docs/usage/metric-alerting/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Metric Alerting"><meta property="og:description" content="Nightingale monitoring supports metric alerting. Based on user-configured alert rules, it periodically queries data sources and triggers alerts when the data in the data sources meets the alert thresholds."><meta property="og:url" content="https://n9e.github.io/docs/usage/metric-alerting/"><meta property="og:site_name" content="Home"><meta property="article:published_time" content="2025-07-26T17:16:49+08:00"><meta property="article:modified_time" content="2025-07-30T12:16:13+08:00"><meta property="og:image" content="https://n9e.github.io/doks.png"><meta property="og:image:alt" content="Home"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@ulricqin"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="Metric Alerting"><meta name=twitter:description content="Nightingale monitoring supports metric alerting. Based on user-configured alert rules, it periodically queries data sources and triggers alerts when the data in the data sources meets the alert thresholds."><meta name=twitter:image content="https://n9e.github.io/doks.png"><meta name=twitter:image:alt content="Metric Alerting"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://n9e.github.io/#/schema/organization/1","name":"Doks","url":"https://n9e.github.io/","sameAs":["https://twitter.com/ulricqin","https://github.com/ccfos/nightingale"],"logo":{"@type":"ImageObject","@id":"https://n9e.github.io/#/schema/image/1","url":"https://n9e.github.io/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://n9e.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://n9e.github.io/#/schema/website/1","url":"https://n9e.github.io/","name":"Home","description":"Nightingale is an open-source monitoring system that focuses on alerting.","publisher":{"@id":"https://n9e.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://n9e.github.io/docs/usage/metric-alerting/","url":"https://n9e.github.io/docs/usage/metric-alerting/","name":"Metric Alerting","description":"Nightingale monitoring supports metric alerting. Based on user-configured alert rules, it periodically queries data sources and triggers alerts when the data in the data sources meets the alert thresholds.","isPartOf":{"@id":"https://n9e.github.io/#/schema/website/1"},"about":{"@id":"https://n9e.github.io/#/schema/organization/1"},"datePublished":"2025-07-26T17:16:49CET","dateModified":"2025-07-30T12:16:13CET","breadcrumb":{"@id":"https://n9e.github.io/docs/usage/metric-alerting/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://n9e.github.io/docs/usage/metric-alerting/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://n9e.github.io/docs/usage/metric-alerting/"]}]},{"@type":"BreadcrumbList","@id":"https://n9e.github.io/docs/usage/metric-alerting/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://n9e.github.io/","url":"https://n9e.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://n9e.github.io/docs/","url":"https://n9e.github.io/docs/","name":"Docs"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://n9e.github.io/docs/usage/","url":"https://n9e.github.io/docs/usage/","name":"Usage"}},{"@type":"ListItem","position":4,"item":{"@id":"https://n9e.github.io/docs/usage/metric-alerting/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://n9e.github.io/#/schema/article/1","headline":"Metric Alerting","description":"Nightingale monitoring supports metric alerting. Based on user-configured alert rules, it periodically queries data sources and triggers alerts when the data in the data sources meets the alert thresholds.","isPartOf":{"@id":"https://n9e.github.io/docs/usage/metric-alerting/"},"mainEntityOfPage":{"@id":"https://n9e.github.io/docs/usage/metric-alerting/"},"datePublished":"2025-07-26T17:16:49CET","dateModified":"2025-07-30T12:16:13CET","author":{"@id":"https://n9e.github.io/#/schema/person/2"},"publisher":{"@id":"https://n9e.github.io/#/schema/organization/1"},"image":{"@id":"https://n9e.github.io/docs/usage/metric-alerting/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://n9e.github.io/#/schema/person/2","name":"Henk Verlinde","sameAs":["https://twitter.com/henkverlinde","https://www.linkedin.com/in/henkverlinde/","https://github.com/UlricQin"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://n9e.github.io/docs/usage/metric-alerting/#/schema/image/2","url":"https://n9e.github.io/doks.png","contentUrl":"https://n9e.github.io/doks.png","caption":"Metric Alerting"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://n9e.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://n9e.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://n9e.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://n9e.github.io/site.webmanifest></head><body class="docs single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Home>Home</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Home</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/docs/prologue/introduction/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/blog/>Blogs</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/ccfos/nightingale><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="dropdown order-md-2"><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
EN
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-end shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=/docs/usage/metric-alerting/>English</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=/zh/docs/usage/metric-alerting/ hreflang=zh lang=zh>Chinese</a></li></ul></div></nav></header><nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation"><div class="container-xxl d-flex align-items-md-center"><form class="doks-search position-relative flex-grow-1 me-auto"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-5f2cae171c6192fa410df4385f7218aa aria-expanded=false>
Prologue</button><div class=collapse id=section-5f2cae171c6192fa410df4385f7218aa><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/prometheus/>Nightingale vs Prometheus</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/pre-knowledge/>Prior knowledge</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/architecture/>Architecture</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/flashcat/>Enterprise Edition</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/videos/>Videos for Getting Started</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-7cd8fb6e31cc946c078d2740c76a9899 aria-expanded=false>
Installation</button><div class=collapse id=section-7cd8fb6e31cc946c078d2740c76a9899><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/pre-intro/>Pre-Introduction</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/upgrade/>Upgrade</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/binary/>Binary Deployment</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/compose/>Docker Compose</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/helm/>Helm</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/configuration/>Configuration</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8fc330d76e990ab6964af08ea1e47d2e aria-expanded=false>
Collector</button><div class=collapse id=section-8fc330d76e990ab6964af08ea1e47d2e><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/intro/>Pre explanation</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/categraf/>Categraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/telegraf/>Telegraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/datadog-agent/>Datadog-Agent</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-411eaaaa405899304e54dce3363a2baf aria-expanded=true>
Quick Start</button><div class="collapse show" id=section-411eaaaa405899304e54dce3363a2baf><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/datasource/>Data Sources</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/ad-hoc/>Ad-hoc Query</a></li><li><a class="docs-link rounded active" href=https://n9e.github.io/docs/usage/metric-alerting/>Metric Alerting</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/logs-alerting/>Log Alerting</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/notify-rules/>Notification Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/dashboard/>Dashboard</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8c004d7e3b8a5a850ab2459c3afc2f57 aria-expanded=false>
Practice</button><div class=collapse id=section-8c004d7e3b8a5a850ab2459c3afc2f57><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/linux/>Linux OS</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/proc/>Process</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/port/>Port</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/exec/>Plugin Scripts</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/mysql/>MySQL</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/redis/>Redis</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/oracle/>Oracle</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-4de8388d84a18a2e157114d9fecff0fe aria-expanded=false>
Use Case</button><div class=collapse id=section-4de8388d84a18a2e157114d9fecff0fe><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/alerting/>Alerting Principles and Process Explanation</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/bizgroup/>Business Groups</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/mute/>Muting Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/subscribe/>Subscription Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/processor/>Event Processor</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/media/>Custom Notification Media</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/sso/>Single Sign-On (SSO)</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/api/>API</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1fe917b01f9a3f87fa2d7d3b7643fac1 aria-expanded=false>
FAQ</button><div class=collapse id=section-1fe917b01f9a3f87fa2d7d3b7643fac1><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/global-callback/>Global Callback is Deprecated, How to Handle Global Scenarios?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/cpu-alerting/>Should 'High CPU Load' Trigger an Alert?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/biz-team-subscribe-infra-alarms/>Should upper-layer businesses receive alarms from underlying infrastructure?</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-5f2cae171c6192fa410df4385f7218aa aria-expanded=false>
Prologue</button><div class=collapse id=section-5f2cae171c6192fa410df4385f7218aa><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/prometheus/>Nightingale vs Prometheus</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/pre-knowledge/>Prior knowledge</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/architecture/>Architecture</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/flashcat/>Enterprise Edition</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/videos/>Videos for Getting Started</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-7cd8fb6e31cc946c078d2740c76a9899 aria-expanded=false>
Installation</button><div class=collapse id=section-7cd8fb6e31cc946c078d2740c76a9899><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/pre-intro/>Pre-Introduction</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/upgrade/>Upgrade</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/binary/>Binary Deployment</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/compose/>Docker Compose</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/helm/>Helm</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/configuration/>Configuration</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8fc330d76e990ab6964af08ea1e47d2e aria-expanded=false>
Collector</button><div class=collapse id=section-8fc330d76e990ab6964af08ea1e47d2e><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/intro/>Pre explanation</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/categraf/>Categraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/telegraf/>Telegraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/datadog-agent/>Datadog-Agent</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-411eaaaa405899304e54dce3363a2baf aria-expanded=true>
Quick Start</button><div class="collapse show" id=section-411eaaaa405899304e54dce3363a2baf><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/datasource/>Data Sources</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/ad-hoc/>Ad-hoc Query</a></li><li><a class="docs-link rounded active" href=https://n9e.github.io/docs/usage/metric-alerting/>Metric Alerting</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/logs-alerting/>Log Alerting</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/notify-rules/>Notification Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/dashboard/>Dashboard</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8c004d7e3b8a5a850ab2459c3afc2f57 aria-expanded=false>
Practice</button><div class=collapse id=section-8c004d7e3b8a5a850ab2459c3afc2f57><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/linux/>Linux OS</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/proc/>Process</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/port/>Port</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/exec/>Plugin Scripts</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/mysql/>MySQL</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/redis/>Redis</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/oracle/>Oracle</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-4de8388d84a18a2e157114d9fecff0fe aria-expanded=false>
Use Case</button><div class=collapse id=section-4de8388d84a18a2e157114d9fecff0fe><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/alerting/>Alerting Principles and Process Explanation</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/bizgroup/>Business Groups</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/mute/>Muting Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/subscribe/>Subscription Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/processor/>Event Processor</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/media/>Custom Notification Media</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/sso/>Single Sign-On (SSO)</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/api/>API</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1fe917b01f9a3f87fa2d7d3b7643fac1 aria-expanded=false>
FAQ</button><div class=collapse id=section-1fe917b01f9a3f87fa2d7d3b7643fac1><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/global-callback/>Global Callback is Deprecated, How to Handle Global Scenarios?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/cpu-alerting/>Should 'High CPU Load' Trigger an Alert?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/biz-team-subscribe-infra-alarms/>Should upper-layer businesses receive alarms from underlying infrastructure?</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#alerting-principles>Alerting Principles</a><ul><li><a href=#principles-of-normal-mode>Principles of Normal Mode</a></li><li><a href=#principles-of-advanced-mode>Principles of Advanced Mode</a></li></ul></li><li><a href=#function-description>Function Description</a><ul><li><a href=#creation-entry>Creation Entry</a></li><li><a href=#basic-configuration>Basic Configuration</a></li><li><a href=#rule-configuration>Rule Configuration</a></li><li><a href=#event-relabel>Event Relabel</a></li><li><a href=#effective-configuration>Effective Configuration</a></li><li><a href=#notification-configuration>Notification Configuration</a></li></ul></li><li><a href=#practical-demonstration>Practical Demonstration</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Metric Alerting</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#alerting-principles>Alerting Principles</a><ul><li><a href=#principles-of-normal-mode>Principles of Normal Mode</a></li><li><a href=#principles-of-advanced-mode>Principles of Advanced Mode</a></li></ul></li><li><a href=#function-description>Function Description</a><ul><li><a href=#creation-entry>Creation Entry</a></li><li><a href=#basic-configuration>Basic Configuration</a></li><li><a href=#rule-configuration>Rule Configuration</a></li><li><a href=#event-relabel>Event Relabel</a></li><li><a href=#effective-configuration>Effective Configuration</a></li><li><a href=#notification-configuration>Notification Configuration</a></li></ul></li><li><a href=#practical-demonstration>Practical Demonstration</a></li></ul></nav></div></nav><p>Nightingale monitoring divides alerting into two parts: alerting and notification. Alerting refers to the periodic judgment through rules that ultimately generates alert events, while notification refers to the subsequent pipeline and notification process of alert events. This chapter first introduces the alerting part, and we consider it successful when an alert event is finally generated.</p><h2 id=alerting-principles>Alerting Principles <a href=#alerting-principles class=anchor aria-hidden=true>#</a></h2><p>Nightingale supports two alerting modes: normal mode and advanced mode (the advanced mode is not open-source yet, but it is planned to be open-sourced later):</p><ul><li>Normal mode: The alert threshold is configured in PromQL, with <code>query conditions</code> and <code>threshold settings</code> combined. If there are no special requirements, normal mode can be used. This mode has the same alerting logic as Prometheus and has good performance. However, it is a bit troublesome to get the value when the alert is recovered.</li><li>Advanced mode: <code>Query conditions</code> and <code>threshold settings</code> are separated. If multiple query conditions need to be calculated by addition, subtraction, multiplication, or division, advanced mode can be used. The on-site values of each query condition will be displayed in the alert event, and the value at the time of recovery can also be easily obtained when the alert is recovered.</li></ul><h3 id=principles-of-normal-mode>Principles of Normal Mode <a href=#principles-of-normal-mode class=anchor aria-hidden=true>#</a></h3><p>In normal mode, Nightingale periodically queries the data source according to the execution frequency configured by the user. The query condition is the PromQL configured by the user, and the query method is an instant query, which calls the <code>/api/v1/query</code> interface of the data source. The number of alert events generated is equal to the number of data points retrieved. For example, if the PromQL is <code>cpu_usage_active > 80</code>, Nightingale uses this PromQL to query the time-series database, and the results returned by the time-series database must be data points where the CPU utilization is greater than 80%, which are all data points that trigger the threshold. Therefore, Nightingale should generate alert events.</p><p>If the user configures a <code>duration</code> greater than 0 in the alert rule, the process becomes more complex. Nightingale will execute the query multiple times according to the execution frequency within the duration, and generate an alert only if a certain data is found in each query. If the <code>duration</code> is set to 0, it means that an alert will be generated as long as data is found in one query.</p><p>If an alert event was generated before, but no data is found in subsequent queries, a recovery event will be generated. After all, if no data is found, it indicates that there is no data in the time-series database that meets the threshold condition, so the time-series database no longer returns any data. For alert recovery, there is an advanced configuration called <code>observation duration</code>, which means that after a recovery event is generated, Nightingale will continue to observe for a period of time. If data is found again within the observation duration, no recovery event will be generated (the alert state will continue to be maintained); if no data is found in each query within the observation duration, the recovery event will be finally generated.</p><p>From the above analysis, when the alert is recovered, the time-series database does not return any data, so Nightingale cannot get the value at the time of recovery, which is a pain point for many users when using normal mode. Nightingale has designed a way to solve this problem. For details, please refer to the article &ldquo;<a href=https://flashcat.cloud/blog/nightingale-release-v7.0.0.beta10/>How to get the value when the alert is recovered?</a>&rdquo;.</p><h3 id=principles-of-advanced-mode>Principles of Advanced Mode <a href=#principles-of-advanced-mode class=anchor aria-hidden=true>#</a></h3><p>In advanced mode, the threshold condition is not put into PromQL. Only filter conditions are written in PromQL. For example, the PromQL:</p><pre><code>cpu_usage_active{cpu=&quot;cpu-total&quot;}
</code></pre><p>In this way, Nightingale uses this PromQL to query the time-series database, and the time-series database returns all data points of CPU utilization each time (with slightly poor performance). Then Nightingale judges the returned data in memory according to the <code>threshold judgment</code> rules configured by the user, as shown in the following figure:</p><img src=/img/usage/metric-alerting/01.png alt="Advanced mode alert"><p>The key difference between advanced mode and normal mode is whether the threshold judgment is done in PromQL and thus by the time-series database, or in Nightingale&rsquo;s memory. In advanced mode, if a recovery event is triggered, the TriggerValue in the recovery event will be automatically filled with the value at the time of recovery. Compared with normal mode, it is easier to obtain the value at the time of recovery.</p><p>In advanced mode, there will also be a <code>data missing</code> judgment logic, commonly known as NoData alert. Nightingale&rsquo;s behavior is: periodically query the data source, store the found data in memory, and if data is found again in the next query, everything is fine. If a certain piece of data is not found in the next query, an alert will be triggered for that data.</p><h2 id=function-description>Function Description <a href=#function-description class=anchor aria-hidden=true>#</a></h2><p>After understanding the principles, let&rsquo;s configure an alert rule to demonstrate how to use Nightingale&rsquo;s metric alerting function.</p><h3 id=creation-entry>Creation Entry <a href=#creation-entry class=anchor aria-hidden=true>#</a></h3><p>The menu entry is in <code>Alerts - Rule Management - Alert Rules</code>, as shown in the following figure:</p><img src=/img/usage/metric-alerting/02.png alt="Rule creation entry"><p>First, select the business group on the left. If there is no business group, you need to create one first. Because there may be many alert rules, they need to be managed by category and subject to permission control, so alert rules are bound to business groups.</p><blockquote><p>Business groups are a flat list, but can be rendered into a tree structure. As long as the <code>/</code> symbol is used in the business group name, it can be rendered into a tree structure. For example, <code>DBA/MySQL</code> and <code>DBA/Redis</code> will be rendered into the tree style as shown in the above figure. Of course, it is necessary to set the business group display mode to tree and set the business group separator to <code>/</code> in the <code>System Configuration - Site Configuration</code> menu.</p></blockquote><p>Next, we will focus on explaining the meaning of each configuration item of the alert rule.</p><blockquote><p>ðŸŸ¢ Tip: On the rule configuration page, there are tooltips next to each form (small question mark icons, you can see usage prompts when you mouse over them). Please remember to check them.</p></blockquote><h3 id=basic-configuration>Basic Configuration <a href=#basic-configuration class=anchor aria-hidden=true>#</a></h3><ul><li>Rule Name: The name of the alert rule, such as &ldquo;High machine load&rdquo;. Variables can be referenced in the rule name, such as <code>{{ $labels.instance }}</code>, but this is highly not recommended, because it will lead to different names of the finally generated alert events, which is very inconvenient when you want to aggregate and view alert events.</li><li>Additional Labels: The additional labels configured here will be appended to the labels of the generated alert events, which can be used for aggregation and filtering of alert events later.</li><li>Remarks: A more detailed description of the alert rule, which supports configuring variables such as <code>$labels</code> and <code>$value</code>.</li></ul><h3 id=rule-configuration>Rule Configuration <a href=#rule-configuration class=anchor aria-hidden=true>#</a></h3><ul><li>Data Source: Select the data source type and filter conditions to specify which data sources the current alert rule takes effect on. Because many companies have multiple sets of Prometheus, this can facilitate rule management.</li><li>Alert Condition: Configure PromQL. You can perform some condition filtering and four arithmetic operations in PromQL. For example, this PromQL: <code>http_api_request_success{region="beijing"} / http_api_request_total{region="beijing"} &lt; 0.995</code> means: calculate the success rate of all HTTP requests in the <code>beijing</code> <code>region</code>. If the success rate is less than <code>99.5%</code>, an alert will be triggered. If the alert engine finds data through this PromQL, it indicates that there are abnormal points. If the abnormality persists in multiple queries and finally meets the duration, an alert event will be generated.</li><li>Multiple Alert Conditions and Level Suppression: In an alert rule, multiple PromQL query conditions can be added. At this time, a <code>level suppression</code> function switch will automatically appear. If the level suppression switch is turned on, if two conditions generate alerts at the same time, only the high-level alert will be sent, and the low-level alert will be suppressed to reduce interference.</li><li>Execution Frequency and Duration: Both configurations provide tooltips on the page, and you can see usage prompts when you mouse over them. The execution frequency is equivalent to <code>evaluation_interval</code> in Prometheus, and the duration is equivalent to <code>for</code> in Prometheus. If the duration is 0, it means that an alert event will be generated as long as data is found in one query.</li></ul><h3 id=event-relabel>Event Relabel <a href=#event-relabel class=anchor aria-hidden=true>#</a></h3><p>The page provides documentation for this part, please refer to it yourself. There is a relabel mechanism in Prometheus, which many people are familiar with (if you haven&rsquo;t learned about it before, you can Google it, it&rsquo;s a very useful design). Prometheus performs relabeling on time-series data, while Nightingale performs relabeling on generated alert events.</p><p>For example, if there is a label <code>instance=10.1.2.3:9090</code>, you can extract the IP information through relabel to generate a new label <code>ident=10.1.2.3</code>. Nightingale&rsquo;s alert self-healing function needs to extract machine information from alert events, which is actually the value of the <code>ident</code> label. Extracting machine information through relabel and writing it into the <code>ident</code> label facilitates subsequent alert self-healing (provided that you configure <code>hostname="$ip"</code> in Categraf).</p><h3 id=effective-configuration>Effective Configuration <a href=#effective-configuration class=anchor aria-hidden=true>#</a></h3><p>This part also provides usage instructions on the page, please refer to it yourself. The most important configuration here is the effective time period. For example, an alert rule can only take effect during the day, and another alert rule can only take effect at night, which can be configured through the effective time period.</p><h3 id=notification-configuration>Notification Configuration <a href=#notification-configuration class=anchor aria-hidden=true>#</a></h3><img src=/img/usage/metric-alerting/03.png alt="Nightingale notification configuration"><p>In the old version, alert recipients and notification media were directly configured in the alert rules, which was cumbersome to modify in batches. The new version extracts the notification logic and abstracts it into notification rules to handle all logic after an alert event is generated. The notification rules will be introduced in detail later.</p><p>Each other field in the notification configuration has a tooltip, and you can see usage prompts when you mouse over them, so they will not be repeated here.</p><p>Alert self-healing: After an alert is generated, automatically execute a specific script on the alerted machine (or a specified central control machine). Where does the information of the alerted machine come from? It is taken from the <code>ident</code> label of the alert event. Which self-healing script to execute specifically? It is specified through the <code>Alert Self-healing</code> field under the notification configuration.</p><p>Additional information is similar to Annotations in Prometheus alert rules. After an alert event is generated, Nightingale will append this additional information to the alert event, which can be referenced in the message template later and finally displayed in notifications such as DingTalk, Feishu, email, etc.</p><h2 id=practical-demonstration>Practical Demonstration <a href=#practical-demonstration class=anchor aria-hidden=true>#</a></h2><p>In order to generate an alert event as soon as possible, I configured a PromQL that will definitely trigger:</p><pre><code>cpu_usage_active &gt; 0
</code></pre><blockquote><p>ðŸŸ¢ The indicator <code>cpu_usage_active</code> is collected by Categraf, which represents CPU utilization. Obviously, CPU utilization will definitely be greater than 0, so this rule can trigger an alert event soon. If you are not using Categraf, you will not have this indicator. Please use the indicators in your own time-series database for testing.</p></blockquote><img src=/img/usage/metric-alerting/04.png alt="Nightingale alert rule configuration example"><p>In the above example, to speed up the generation of alert events, I set the execution frequency to 15s and the duration to 0. In this way, Nightingale will query the data source every 15s, and generate an alert event if data is found.</p><p>After a while, you can find that the status field on the left side of the alert rule becomes a red exclamation mark, indicating that an alert event has been triggered. Clicking on it will show the relevant alert events generated by this rule in the side panel. Of course, you can also see the current active alerts (unrecovered alerts are called active alerts) and all historical alerts in the alert events menu.</p><img src=/img/usage/metric-alerting/05.png alt="Nightingale alert events"><p>The first alert event above is the one just tested, and the other events are from previous tests, so you don&rsquo;t need to care about them. The alert event is generated, indicating that the alert rule is configured correctly. Next, configure the notification rule to specify who will receive what kind of alert events and through which notification media (phone calls, SMS, emails, Feishu, DingTalk, WeChat Work, etc., called notification media).</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"><div class=edit-page><a href=https://github.com/n9e/n9e.github.io/blob/master/content/en/docs/usage/metric-alerting.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></div></div><div class="docs-navigation d-flex justify-content-between"><a href=/docs/usage/ad-hoc/><div class="card my-1"><div class="card-body py-2">&larr; Ad-hoc Query</div></div></a><a class=ms-auto href=/docs/usage/logs-alerting/><div class="card my-1"><div class="card-body py-2">Log Alerting &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>&copy; 2025 CCFÂ·Nightingale, all rights reserved.</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.0a0106334435d4110713bfaff4acaf02533b0c56d44412a74e9518db07672ddb7e099a9c7517bc9cb529e2ddd4ae2e438b40b720288900d5e74fb6d8928d9097.js integrity="sha512-CgEGM0Q11BEHE7+v9KyvAlM7DFbURBKnTpUY2wdnLdt+CZqcdRe8nLUp4t3Uri5Di0C3ICiJANXnT7bYko2Qlw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.0d31f7af12feb83ee633b6351b023ee643ea3412376fbaa09c5a26d1a5ef999939f1ad379a5b12e1199a2c7d72ae1b23f633060a679628dcbfb0e72378cd20be.js integrity="sha512-DTH3rxL+uD7mM7Y1GwI+5kPqNBI3b7qgnFom0aXvmZk58a03mlsS4RmaLH1yrhsj9jMGCmeWKNy/sOcjeM0gvg==" crossorigin=anonymous defer></script>
<script src=/main.min.6afc4bf655f45ae3e63629ec95be8bd2e0e792084b5635a6fe70b169fa9d1491638b3a4e900ed59c2e017ca18768e5c392e110d0e1336509f49f7dc418d16eef.js integrity="sha512-avxL9lX0WuPmNinslb6L0uDnkghLVjWm/nCxafqdFJFjizpOkA7VnC4BfKGHaOXDkuEQ0OEzZQn0n33EGNFu7w==" crossorigin=anonymous defer></script>
<script src=https://n9e.github.io/index.min.da360db418e417ae98e29714f321e339753db2d91374939e5a5eb03d28aeaacb022b7bae89a356afa70b73562b5a28f906a749693d0ea518973c7ba1d3615a1e.js integrity="sha512-2jYNtBjkF66Y4pcU8yHjOXU9stkTdJOeWl6wPSiuqssCK3uuiaNWr6cLc1YrWij5BqdJaT0OpRiXPHuh02FaHg==" crossorigin=anonymous defer></script>
<script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?9d7cc507a7aae60b28b5e04bb995492a",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></body></html>