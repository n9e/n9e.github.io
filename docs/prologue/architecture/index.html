<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://n9e.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://n9e.github.io/main.dd0fbc6c832be79a8341aacd98d324c8674be1aa7b83e2aa420b28d250f5cf4fef6d5da8f760a3b37f218160bdb23864ff3983c3b5c16f50b92cc0d4d7ea1113.css integrity="sha512-3Q+8bIMr55qDQarNmNMkyGdL4ap7g+KqQgso0lD1z0/vbV2o92Cjs38hgWC9sjhk/zmDw7XBb1C5LMDU1+oREw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Architecture - Nightingale</title><meta name=description content="This article explains the architecture design of Nightingale monitoring (Nightingale), including the design of centralized clusters and the deployment mode of edge data centers."><link rel=canonical href=https://n9e.github.io/docs/prologue/architecture/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Architecture"><meta property="og:description" content="This article explains the architecture design of Nightingale monitoring (Nightingale), including the design of centralized clusters and the deployment mode of edge data centers."><meta property="og:url" content="https://n9e.github.io/docs/prologue/architecture/"><meta property="og:site_name" content="Home"><meta property="article:published_time" content="2025-07-26T13:27:07+08:00"><meta property="article:modified_time" content="2025-12-27T13:24:21+08:00"><meta property="og:image" content="https://n9e.github.io/doks.png"><meta property="og:image:alt" content="Home"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@ulricqin"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="Architecture"><meta name=twitter:description content="This article explains the architecture design of Nightingale monitoring (Nightingale), including the design of centralized clusters and the deployment mode of edge data centers."><meta name=twitter:image content="https://n9e.github.io/doks.png"><meta name=twitter:image:alt content="Architecture"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://n9e.github.io/#/schema/organization/1","name":"Doks","url":"https://n9e.github.io/","sameAs":["https://twitter.com/ulricqin","https://github.com/ccfos/nightingale"],"logo":{"@type":"ImageObject","@id":"https://n9e.github.io/#/schema/image/1","url":"https://n9e.github.io/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://n9e.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://n9e.github.io/#/schema/website/1","url":"https://n9e.github.io/","name":"Home","description":"Nightingale is an open-source monitoring system that focuses on alerting.","publisher":{"@id":"https://n9e.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://n9e.github.io/docs/prologue/architecture/","url":"https://n9e.github.io/docs/prologue/architecture/","name":"Architecture","description":"This article explains the architecture design of Nightingale monitoring (Nightingale), including the design of centralized clusters and the deployment mode of edge data centers.","isPartOf":{"@id":"https://n9e.github.io/#/schema/website/1"},"about":{"@id":"https://n9e.github.io/#/schema/organization/1"},"datePublished":"2025-07-26T13:27:07CET","dateModified":"2025-12-27T13:24:21CET","breadcrumb":{"@id":"https://n9e.github.io/docs/prologue/architecture/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://n9e.github.io/docs/prologue/architecture/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://n9e.github.io/docs/prologue/architecture/"]}]},{"@type":"BreadcrumbList","@id":"https://n9e.github.io/docs/prologue/architecture/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://n9e.github.io/","url":"https://n9e.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://n9e.github.io/docs/","url":"https://n9e.github.io/docs/","name":"Docs"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://n9e.github.io/docs/prologue/","url":"https://n9e.github.io/docs/prologue/","name":"Prologue"}},{"@type":"ListItem","position":4,"item":{"@id":"https://n9e.github.io/docs/prologue/architecture/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://n9e.github.io/#/schema/article/1","headline":"Architecture","description":"This article explains the architecture design of Nightingale monitoring (Nightingale), including the design of centralized clusters and the deployment mode of edge data centers.","isPartOf":{"@id":"https://n9e.github.io/docs/prologue/architecture/"},"mainEntityOfPage":{"@id":"https://n9e.github.io/docs/prologue/architecture/"},"datePublished":"2025-07-26T13:27:07CET","dateModified":"2025-12-27T13:24:21CET","author":{"@id":"https://n9e.github.io/#/schema/person/2"},"publisher":{"@id":"https://n9e.github.io/#/schema/organization/1"},"image":{"@id":"https://n9e.github.io/docs/prologue/architecture/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://n9e.github.io/#/schema/person/2","name":"Henk Verlinde","sameAs":["https://twitter.com/henkverlinde","https://www.linkedin.com/in/henkverlinde/","https://github.com/UlricQin"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://n9e.github.io/docs/prologue/architecture/#/schema/image/2","url":"https://n9e.github.io/doks.png","contentUrl":"https://n9e.github.io/doks.png","caption":"Architecture"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://n9e.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://n9e.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://n9e.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://n9e.github.io/site.webmanifest></head><body class="docs single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Home>Home</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Home</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/docs/prologue/introduction/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/blog/>Blogs</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/ccfos/nightingale><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><div class="dropdown order-md-2"><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
EN
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-end shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=/docs/prologue/architecture/>English</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=/zh/docs/prologue/architecture/ hreflang=zh lang=zh>Chinese</a></li></ul></div></nav></header><nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation"><div class="container-xxl d-flex align-items-md-center"><form class="doks-search position-relative flex-grow-1 me-auto"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-5f2cae171c6192fa410df4385f7218aa aria-expanded=true>
Prologue</button><div class="collapse show" id=section-5f2cae171c6192fa410df4385f7218aa><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/prometheus/>Nightingale vs Prometheus</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/pre-knowledge/>Prior knowledge</a></li><li><a class="docs-link rounded active" href=https://n9e.github.io/docs/prologue/architecture/>Architecture</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/flashcat/>Enterprise Edition</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/videos/>Videos for Getting Started</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-7cd8fb6e31cc946c078d2740c76a9899 aria-expanded=false>
Installation</button><div class=collapse id=section-7cd8fb6e31cc946c078d2740c76a9899><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/pre-intro/>Pre-Introduction</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/upgrade/>Upgrade</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/binary/>Binary Deployment</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/compose/>Docker Compose</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/helm/>Helm</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/configuration/>Configuration</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8fc330d76e990ab6964af08ea1e47d2e aria-expanded=false>
Collector</button><div class=collapse id=section-8fc330d76e990ab6964af08ea1e47d2e><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/intro/>Pre explanation</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/categraf/>Categraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/telegraf/>Telegraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/datadog-agent/>Datadog-Agent</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-411eaaaa405899304e54dce3363a2baf aria-expanded=false>
Quick Start</button><div class=collapse id=section-411eaaaa405899304e54dce3363a2baf><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/datasource/>Data Sources</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/ad-hoc/>Ad-hoc Query</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/metric-alerting/>Metric Alerting</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/logs-alerting/>Log Alerting</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/notify-rules/>Notification Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/dashboard/>Dashboard</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8c004d7e3b8a5a850ab2459c3afc2f57 aria-expanded=false>
Practice</button><div class=collapse id=section-8c004d7e3b8a5a850ab2459c3afc2f57><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/linux/>Linux OS</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/proc/>Process</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/port/>Port</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/exec/>Plugin Scripts</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/mysql/>MySQL</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/redis/>Redis</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/oracle/>Oracle</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/java/>Java Programs</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-4de8388d84a18a2e157114d9fecff0fe aria-expanded=false>
Use Case</button><div class=collapse id=section-4de8388d84a18a2e157114d9fecff0fe><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/alerting/>Alerting Principles and Process Explanation</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/bizgroup/>Business Groups</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/mute/>Muting Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/subscribe/>Subscription Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/processor/>Event Processor</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/media/>Custom Notification Media</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/sso/>Single Sign-On (SSO)</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/api/>API</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1fe917b01f9a3f87fa2d7d3b7643fac1 aria-expanded=false>
FAQ</button><div class=collapse id=section-1fe917b01f9a3f87fa2d7d3b7643fac1><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/global-callback/>Global Callback is Deprecated, How to Handle Global Scenarios?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/cpu-alerting/>Should 'High CPU Load' Trigger an Alert?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/biz-team-subscribe-infra-alarms/>Should upper-layer businesses receive alarms from underlying infrastructure?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/how-to-import-prometheus-rules/>How to import Prometheus rules?</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-5f2cae171c6192fa410df4385f7218aa aria-expanded=true>
Prologue</button><div class="collapse show" id=section-5f2cae171c6192fa410df4385f7218aa><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/introduction/>Introduction</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/prometheus/>Nightingale vs Prometheus</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/pre-knowledge/>Prior knowledge</a></li><li><a class="docs-link rounded active" href=https://n9e.github.io/docs/prologue/architecture/>Architecture</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/flashcat/>Enterprise Edition</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/prologue/videos/>Videos for Getting Started</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-7cd8fb6e31cc946c078d2740c76a9899 aria-expanded=false>
Installation</button><div class=collapse id=section-7cd8fb6e31cc946c078d2740c76a9899><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/pre-intro/>Pre-Introduction</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/upgrade/>Upgrade</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/binary/>Binary Deployment</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/compose/>Docker Compose</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/helm/>Helm</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/install/configuration/>Configuration</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8fc330d76e990ab6964af08ea1e47d2e aria-expanded=false>
Collector</button><div class=collapse id=section-8fc330d76e990ab6964af08ea1e47d2e><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/intro/>Pre explanation</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/categraf/>Categraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/telegraf/>Telegraf</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/agent/datadog-agent/>Datadog-Agent</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-411eaaaa405899304e54dce3363a2baf aria-expanded=false>
Quick Start</button><div class=collapse id=section-411eaaaa405899304e54dce3363a2baf><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/datasource/>Data Sources</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/ad-hoc/>Ad-hoc Query</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/metric-alerting/>Metric Alerting</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/logs-alerting/>Log Alerting</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/notify-rules/>Notification Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usage/dashboard/>Dashboard</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8c004d7e3b8a5a850ab2459c3afc2f57 aria-expanded=false>
Practice</button><div class=collapse id=section-8c004d7e3b8a5a850ab2459c3afc2f57><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/linux/>Linux OS</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/proc/>Process</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/port/>Port</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/exec/>Plugin Scripts</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/mysql/>MySQL</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/redis/>Redis</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/oracle/>Oracle</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/practice/java/>Java Programs</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-4de8388d84a18a2e157114d9fecff0fe aria-expanded=false>
Use Case</button><div class=collapse id=section-4de8388d84a18a2e157114d9fecff0fe><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/alerting/>Alerting Principles and Process Explanation</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/bizgroup/>Business Groups</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/mute/>Muting Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/subscribe/>Subscription Rules</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/processor/>Event Processor</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/media/>Custom Notification Media</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/sso/>Single Sign-On (SSO)</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/usecase/api/>API</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-1fe917b01f9a3f87fa2d7d3b7643fac1 aria-expanded=false>
FAQ</button><div class=collapse id=section-1fe917b01f9a3f87fa2d7d3b7643fac1><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/global-callback/>Global Callback is Deprecated, How to Handle Global Scenarios?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/cpu-alerting/>Should 'High CPU Load' Trigger an Alert?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/biz-team-subscribe-infra-alarms/>Should upper-layer businesses receive alarms from underlying infrastructure?</a></li><li><a class="docs-link rounded" href=https://n9e.github.io/docs/faq/how-to-import-prometheus-rules/>How to import Prometheus rules?</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#architecture-diagram>Architecture Diagram</a></li><li><a href=#single-node-testing-mode>Single Node Testing Mode</a></li><li><a href=#single-node-production-mode>Single Node Production Mode</a></li><li><a href=#nightingale-cluster>Nightingale Cluster</a></li><li><a href=#edge-mode>Edge Mode</a><ul><li><a href=#configuration-examples>Configuration Examples</a></li><li><a href=#other-use-cases>Other Use Cases</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Architecture</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#architecture-diagram>Architecture Diagram</a></li><li><a href=#single-node-testing-mode>Single Node Testing Mode</a></li><li><a href=#single-node-production-mode>Single Node Production Mode</a></li><li><a href=#nightingale-cluster>Nightingale Cluster</a></li><li><a href=#edge-mode>Edge Mode</a><ul><li><a href=#configuration-examples>Configuration Examples</a></li><li><a href=#other-use-cases>Other Use Cases</a></li></ul></li></ul></nav></div></nav><p>Nightingale&rsquo;s architecture is relatively simple. For testing purposes, a single binary can be used to start it. However, for production environments, it relies on MySQL and Redis. Some companies have multiple data centers, and some edge data centers have poor network quality; Nightingale has been specifically designed to address such scenarios.</p><h2 id=architecture-diagram>Architecture Diagram <a href=#architecture-diagram class=anchor aria-hidden=true>#</a></h2><p>If we do not consider the edge mode, Nightingale has only one main process, the <code>n9e</code> process, which relies on MySQL and Redis to store some management data. It can connect to various data sources, and the technical architecture diagram is as follows:</p><img src=/img/prologue/arch/01.png alt="Nightingale Technical Architecture Diagram"><p>Initially supported data sources include Prometheus, VictoriaMetrics, and ElasticSearch, which support both visualization and alerting. However, Nightingale is focusing more on the alerting engine, so new data sources will only support alerting.</p><p>Based on whether the monitoring data flows through Nightingale, we can distinguish two modes:</p><ul><li><strong>Mode 1</strong>: Monitoring data does not flow through Nightingale. Users handle data collection themselves and only configure the time-series databases in Nightingale for visualization and alerting. The architecture diagram above is a typical example of this mode.</li><li><strong>Mode 2</strong>: Data flows through Nightingale. Categraf pushes data to Nightingale via the remote write protocol. Nightingale does not store data directly but forwards it to time-series databases, which are determined by the <code>Pushgw.Writers</code> configuration in the <code>config.toml</code> file. The architecture diagram for Mode 2 is as follows:</li></ul><img src=/img/prologue/arch/02.png alt="Nightingale Data Flow Architecture Diagram"><p>In the diagram above, Nightingale receives monitoring data and forwards it to VictoriaMetrics. It can also forward data to Prometheus; if you want to forward to Prometheus, remember to enable the remote receiver feature when starting Prometheus (you can check which control parameter to use with <code>./prometheus --help | grep receiver</code>), which enables the <code>/api/v1/write</code> interface in Prometheus.</p><blockquote><p>ðŸŸ¢ If you are a new user, it is recommended to use VictoriaMetrics directly, as it offers better performance and supports clustered modes. Additionally, it is compatible with the Prometheus interface. However, there is less Chinese documentation available for VictoriaMetrics compared to Prometheus.</p></blockquote><h2 id=single-node-testing-mode>Single Node Testing Mode <a href=#single-node-testing-mode class=anchor aria-hidden=true>#</a></h2><p>To quickly test Nightingale, download the release package from <a href=https://github.com/ccfos/nightingale/releases>Nightingale GitHub releases</a>. After downloading, extract the package, and you will find a binary file named <code>n9e</code>. You can run it directly with <code>./n9e</code>, which defaults to port 17000. The default username is <code>root</code>, and the password is <code>root.2020</code>.</p><p>The <code>n9e</code> process only relies on the <code>etc</code> and <code>integrations</code> directories in the same directory as the binary and does not depend on any other services.</p><p>In this single-node mode, it is convenient for quick testing but not recommended for production environments. In this mode, Nightingale stores configuration data (such as user information, alert rules, dashboards, etc.) in a local SQLite database file, so after starting the <code>n9e</code> process, a file named <code>n9e.db</code> will be generated in the same directory.</p><h2 id=single-node-production-mode>Single Node Production Mode <a href=#single-node-production-mode class=anchor aria-hidden=true>#</a></h2><p>If you want to deploy Nightingale in a production environment, it requires dependencies on MySQL and Redis. Therefore, you need to configure the connection information for MySQL and Redis in the <code>etc/config.toml</code> file.</p><p>MySQL key configuration example:</p><pre><code class=language-toml>[DB]
DBType = &quot;mysql&quot;
DSN = &quot;root:YourPa55word@tcp(localhost:3306)/n9e_v6?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;
</code></pre><p>In the above <code>DSN</code> (Data Source Name), the format is <code>username:password@tcp(address:port)/database_name?parameters</code>, where <code>n9e_v6</code> is the name of the Nightingale database. Since version V6, this name has been consistently used (even though we are now at V8+), and it has been retained in the table creation statements.</p><p>Redis key configuration example:</p><pre><code class=language-toml>[Redis]
Address = &quot;127.0.0.1:6379&quot;
RedisType = &quot;standalone&quot;
</code></pre><p>The above is just a basic configuration example. The configuration file contains many other configuration items, which can be referenced in the comments within the file or in the <a href=/docs/install/configuration/>configuration file documentation</a>.</p><h2 id=nightingale-cluster>Nightingale Cluster <a href=#nightingale-cluster class=anchor aria-hidden=true>#</a></h2><p>The cluster mode is straightforward; you just need to set up multiple machines, deploy the <code>n9e</code> process on each machine (the process requires the <code>etc</code> and <code>integrations</code> directories to function properly), and ensure that the configuration files of all <code>n9e</code> processes are identical. They should share the same MySQL and Redis instances to work correctly.</p><p>Multiple <code>n9e</code> processes will automatically distribute alert rules. For example, if there are 2 <code>n9e</code> processes and users have configured a total of 100 alert rules, Nightingale will automatically assign these 100 alert rules to the 2 <code>n9e</code> processes, with each process handling approximately 50 alert rules (each rule will only run on one <code>n9e</code> instance, ensuring no duplicate alerts). If one machine goes down, the <code>n9e</code> process on the other machine will take over its alert rules and continue operating.</p><h2 id=edge-mode>Edge Mode <a href=#edge-mode class=anchor aria-hidden=true>#</a></h2><p>The several modes mentioned above are all centralized modes. However, in actual production environments, there may be multiple computer rooms, and the network quality between the central computer room and edge computer rooms may be poor. If the <code>n9e</code> in the central computer room is made responsible for alerting on a time-series database in an edge computer room, it will be unstable, and sometimes <code>n9e</code> may even fail to connect directly to the time-series database in the edge computer room. In such cases, Nightingale&rsquo;s edge mode is required.</p><img src=/img/prologue/arch/edge.png alt="Nightingale Edge Architecture Mode"><p>Assume your company has 3 data centers: a central primary data center, edge data center A, and edge data center B. A has a dedicated line to the central facility with good network quality, while B uses public network with unreliable connectivity.</p><p>The <code>n9e</code> process is deployed in the central data center, along with its dependencies MySQL and Redis. For high availability, deploy multiple central <code>n9e</code> instances with identical configurations connecting to the same MySQL and Redis.</p><p>In the diagram, there are 5 data sources:</p><ul><li>Central data center: Loki and ElasticSearch</li><li>Edge A: ElasticSearch and Prometheus</li><li>Edge B: VictoriaMetrics</li></ul><p>To uniformly view data from all 5 sources in the central <code>n9e</code>, configure their access addresses in Nightingale via <code>Integrations - Data sources</code>.</p><p>The central <code>n9e</code> can directly access data sources in the central and edge A facilities via internal addresses but cannot reach edge B&rsquo;s VictoriaMetrics (no dedicated line). Thus, expose edge B&rsquo;s VictoriaMetrics via a public address for central <code>n9e</code> access:</p><ul><li>Expose edge B&rsquo;s VictoriaMetrics at a public address (e.g., https://ex.a.com)</li><li>Configure this public URL in Nightingale&rsquo;s web UI for edge B&rsquo;s VictoriaMetrics</li></ul><p>Lines 1-5 in the diagram represent connections between the central <code>n9e</code> and the 5 data sources. When users query data via Nightingale&rsquo;s web interface, requests are proxied through the <code>n9e</code> process to backend data sources, which return results to the user.</p><p><code>n9e-edge</code> is deployed in edge B to handle alert evaluations for its VictoriaMetrics. It synchronizes alert rules from the central <code>n9e</code> (line A in the diagram), caches them in memory, and evaluates alerts against the local VictoriaMetrics. This ensures reliable alerting as <code>n9e-edge</code> and VictoriaMetrics are internally connected. Even if <code>n9e-edge</code> loses connectivity to the central <code>n9e</code>, alert evaluation continues using cached rules.</p><p>Alert events generated by <code>n9e-edge</code> are written to the central MySQL via <code>n9e</code>&rsquo;s API and sent to notification services (DingTalk, Feishu, FlashDuty, etc.). If network connectivity between <code>n9e-edge</code> and <code>n9e</code> fails, events cannot be written to MySQL, but notifications can still be sent if the edge facility has external network access.</p><p>In the architecture:</p><ul><li>Central <code>n9e</code> handles alert evaluation for central Loki/ElasticSearch and edge A&rsquo;s ElasticSearch/Prometheus</li><li>Edge B&rsquo;s <code>n9e-edge</code> handles alert evaluation for its VictoriaMetrics</li></ul><p>To associate data sources with specific alert engines, configure this in the data source management page:</p><img src=/img/prologue/arch/05.png alt="Data Source Management Page"><p>In the diagram:</p><ul><li>URL: Address used by central <code>n9e</code> to read data (public address for edge B&rsquo;s VictoriaMetrics in the example)</li><li>Time-series Database Intranet Address: Address used by <code>n9e-edge</code> to connect to VictoriaMetrics. Leave blank to use the URL if it&rsquo;s already an internal address. For edge B, configure an internal address for reliable alert evaluation.</li><li>Remote Write URL: VictoriaMetrics&rsquo; remote write address for recording rules. <code>n9e-edge</code> processes recording rules and writes results back to the time-series database, so use an internal address. Optional if recording rules are unused.</li><li>Associated Alert Engine Cluster: Selected as &ldquo;edge-b&rdquo; (name specified by <code>EngineName</code> in <code>edge.toml</code>), establishing the association between edge B&rsquo;s <code>n9e-edge</code> and its VictoriaMetrics for handling alert/recording rules.</li></ul><p>Newer Nightingale versions require <code>n9e-edge</code> to use a dedicated Redis instance in edge B, separate from the central <code>n9e</code>&rsquo;s Redis (labeled R1 and R2 in the diagram).</p><p>For Categraf: if network connectivity is good (central and edge A), Categraf can report directly to the central <code>n9e</code>. For edge B with <code>n9e-edge</code>, configure Categraf to connect to the local <code>n9e-edge</code>.</p><h3 id=configuration-examples>Configuration Examples <a href=#configuration-examples class=anchor aria-hidden=true>#</a></h3><p>Sample configurations for the above architecture:</p><h4 id=central-n9e-configuration>Central <code>n9e</code> Configuration <a href=#central-n9e-configuration class=anchor aria-hidden=true>#</a></h4><p>The central <code>n9e</code> uses <code>etc/config.toml</code>:</p><pre><code class=language-toml>[HTTP.APIForService]
Enable = true
[HTTP.APIForService.BasicAuth]
user001 = &quot;ccc26da7b9aba533cbb263a36c07dcc5&quot;
user002 = &quot;ccc26da7b9aba533cbb263a36c07dcc6&quot;
</code></pre><p>Key configuration: <code>HTTP.APIForService</code>. Default <code>Enable = false</code> (security measure). Set to <code>true</code> to support <code>n9e-edge</code>. <code>n9e-edge</code> uses BasicAuth for authentication (configured above with two users for demonstration). If <code>n9e</code> is exposed publicly, <strong>modify default passwords</strong> to prevent attacks.</p><h4 id=edge-n9e-edge-configuration>Edge <code>n9e-edge</code> Configuration <a href=#edge-n9e-edge-configuration class=anchor aria-hidden=true>#</a></h4><p><code>n9e-edge</code> uses <code>etc/edge/edge.toml</code>. Configure the central <code>n9e</code> address for rule synchronization:</p><pre><code class=language-toml>[CenterApi]
Addrs = [&quot;http://N9E-CENTER-SERVER:17000&quot;]
BasicAuthUser = &quot;user001&quot;
BasicAuthPass = &quot;ccc26da7b9aba533cbb263a36c07dcc5&quot;
# unit: ms
Timeout = 9000
</code></pre><p><code>N9E-CENTER-SERVER:17000</code> is the central <code>n9e</code> address. <code>BasicAuthUser</code> and <code>BasicAuthPass</code> match central credentials (omit if BasicAuth is disabled). <strong>Always modify default passwords</strong> for public exposure.</p><p>New <code>n9e-edge</code> versions require Redis (configure in <code>edge.toml</code>). Check for Redis settings in the default <code>edge.toml</code> to confirm dependency.</p><h4 id=edge-categraf-configuration>Edge Categraf Configuration <a href=#edge-categraf-configuration class=anchor aria-hidden=true>#</a></h4><p>Configure writer and heartbeat addresses to point to <code>n9e-edge</code>:</p><pre><code class=language-toml>...
[[writers]]
url = &quot;http://N9E-EDGE:19000/prometheus/v1/write&quot;

...
[heartbeat]
enable = true

# report os version cpu.util mem.util metadata
url = &quot;http://N9E-EDGE:19000/v1/n9e/heartbeat&quot;
...
</code></pre><p><code>N9E-EDGE:19000</code> is the <code>n9e-edge</code> address (default port 19000, configurable in <code>edge.toml</code>).</p><h4 id=ibex-configuration>Ibex Configuration <a href=#ibex-configuration class=anchor aria-hidden=true>#</a></h4><p>For self-healing functionality (ibex), enable in <code>edge.toml</code>:</p><pre><code class=language-toml>[Ibex]
Enable = true
RPCListen = &quot;0.0.0.0:20090&quot;
</code></pre><p>Configure edge Categraf to connect to <code>n9e-edge</code>&rsquo;s RPC port:</p><pre><code class=language-toml>[ibex]
enable = true
## ibex flush interval
interval = &quot;1000ms&quot;
## n9e ibex server rpc address
servers = [&quot;N9E-EDGE-IP:20090&quot;]
## temp script dir
meta_dir = &quot;./meta&quot;
</code></pre><p><code>N9E-EDGE-IP:20090</code> is the <code>n9e-edge</code> RPC address (no <code>http://</code> prefix for RPC).</p><h3 id=other-use-cases>Other Use Cases <a href=#other-use-cases class=anchor aria-hidden=true>#</a></h3><p>Beyond poor network links, edge mode suits secure network partitions where only a relay machine connects to the central <code>n9e</code>. Deploy <code>n9e-edge</code> on the relay, with other machines&rsquo; Categraf instances connecting to it.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"><div class=edit-page><a href=https://github.com/n9e/n9e.github.io/blob/master/content/en/docs/prologue/architecture.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></div></div><div class="docs-navigation d-flex justify-content-between"><a href=/docs/prologue/pre-knowledge/><div class="card my-1"><div class="card-body py-2">&larr; Prior knowledge</div></div></a><a class=ms-auto href=/docs/prologue/flashcat/><div class="card my-1"><div class="card-body py-2">Enterprise Edition &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>&copy; 2025 CCFÂ·Nightingale, all rights reserved.</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.0a0106334435d4110713bfaff4acaf02533b0c56d44412a74e9518db07672ddb7e099a9c7517bc9cb529e2ddd4ae2e438b40b720288900d5e74fb6d8928d9097.js integrity="sha512-CgEGM0Q11BEHE7+v9KyvAlM7DFbURBKnTpUY2wdnLdt+CZqcdRe8nLUp4t3Uri5Di0C3ICiJANXnT7bYko2Qlw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.0d31f7af12feb83ee633b6351b023ee643ea3412376fbaa09c5a26d1a5ef999939f1ad379a5b12e1199a2c7d72ae1b23f633060a679628dcbfb0e72378cd20be.js integrity="sha512-DTH3rxL+uD7mM7Y1GwI+5kPqNBI3b7qgnFom0aXvmZk58a03mlsS4RmaLH1yrhsj9jMGCmeWKNy/sOcjeM0gvg==" crossorigin=anonymous defer></script>
<script src=/main.min.6afc4bf655f45ae3e63629ec95be8bd2e0e792084b5635a6fe70b169fa9d1491638b3a4e900ed59c2e017ca18768e5c392e110d0e1336509f49f7dc418d16eef.js integrity="sha512-avxL9lX0WuPmNinslb6L0uDnkghLVjWm/nCxafqdFJFjizpOkA7VnC4BfKGHaOXDkuEQ0OEzZQn0n33EGNFu7w==" crossorigin=anonymous defer></script>
<script src=https://n9e.github.io/index.min.23c81326645bf6168f4af7604e93984267d172a79c1d4f5e6c4ae8e87a3ecfd4d84ce34b23042c5f2ba8ed67e49e8db4e0af409a826c8b564693ac760baeb5bf.js integrity="sha512-I8gTJmRb9haPSvdgTpOYQmfRcqecHU9ebEro6Ho+z9TYTONLIwQsXyuo7Wfkno204K9AmoJsi1ZGk6x2C661vw==" crossorigin=anonymous defer></script>
<script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?9d7cc507a7aae60b28b5e04bb995492a",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></body></html>